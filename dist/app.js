(()=>{function g(r,s=window,o={}){try{s.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(r,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function T(r=".accordeon"){let s=document.querySelector(r);if(!s){console.log("[ACCORDION] root not found");return}let o=e=>e.classList.contains("accordeon-item--level1"),i=e=>e.classList.contains("accordeon-item--level2"),l=e=>e==null?void 0:e.querySelector(":scope > .accordeon__list"),m=e=>o(e)?s:e.closest(".accordeon__list");s.querySelectorAll(".accordeon__trigger").forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0");let n=e.closest(".accordeon-item--level1, .accordeon-item--level2"),c=l(n);if(c){let a=c.id||`acc-panel-${t}`;c.id=a,e.setAttribute("aria-controls",a),e.setAttribute("aria-expanded","false")}});function d(e){e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=n=>{n.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function p(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let n=c=>{c.propertyName==="max-height"&&(e.removeEventListener("transitionend",n),e.dataset.state="collapsed")};e.addEventListener("transitionend",n)}function h(e){let t=m(e);if(!t)return;let n=o(e)?"accordeon-item--level1":"accordeon-item--level2";Array.from(t.children).forEach(c=>{var u;if(c===e||!((u=c.classList)!=null&&u.contains(n)))return;let a=l(c);if(a&&(a.dataset.state==="open"||a.dataset.state==="opening")){p(a);let f=c.querySelector(".accordeon__trigger");f==null||f.setAttribute("aria-expanded","false"),g(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",c,{source:"sibling"})}})}function y(){s.querySelectorAll(".accordeon-item--level2 .accordeon__list").forEach(e=>{var t;if(e.dataset.state==="open"||e.dataset.state==="opening"){p(e);let n=e.closest(".accordeon-item--level2");(t=n==null?void 0:n.querySelector(".accordeon__trigger"))==null||t.setAttribute("aria-expanded","false"),g("ACC_L2_CLOSE",n,{source:"reset-all"})}})}function E(e){let t=l(e);if(!t)return;let n=e.querySelector(".accordeon__trigger"),c=!(t.dataset.state==="open"||t.dataset.state==="opening");h(e),c&&o(e)&&y(),c?(d(t),n==null||n.setAttribute("aria-expanded","true"),g(o(e)?"ACC_L1_OPEN":"ACC_L2_OPEN",e,{opening:!0})):(p(t),n==null||n.setAttribute("aria-expanded","false"),o(e)&&y(),g(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",e,{opening:!1}))}document.body.classList.add("js-prep"),s.querySelectorAll(".accordeon__list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),s.addEventListener("click",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!s.contains(t))return;e.preventDefault();let n=t.closest(".accordeon-item--level1, .accordeon-item--level2");n&&E(n)}),s.addEventListener("keydown",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!s.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let n=t.closest(".accordeon-item--level1, .accordeon-item--level2");n&&E(n)});let L=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});s.querySelectorAll(".accordeon__list").forEach(e=>L.observe(e))}var q=0,S=0,k="";function H(){if(q++)return;let r=document.documentElement;k=r.style.scrollBehavior,r.style.scrollBehavior="auto",S=window.scrollY||r.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${S}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function _({delayMs:r=0}={}){let s=()=>{if(--q>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=k||"",window.scrollTo(0,S)};r?setTimeout(s,r):s()}console.log("[VIMEO] module loaded");function M(r){var o;if(!r)return"";let s=String(r).trim();if(/^\d+$/.test(s))return s;try{let i=new URL(s,"https://example.com");if((i.hostname||"").includes("vimeo.com")){let m=i.pathname.split("/").filter(Boolean);return((o=(m[m.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function W(r,s,o={}){if(!r)return;let i=M(s);if(!i){r.innerHTML="";return}let l=new URLSearchParams({dnt:1,...o}).toString(),m=`https://player.vimeo.com/video/${i}?${l}`,d=document.createElement("iframe");d.src=m,d.allow="autoplay; fullscreen; picture-in-picture; encrypted-media",d.setAttribute("frameborder","0"),d.style.width="100%",d.style.height="100%",r.innerHTML="",r.appendChild(d)}console.log("[LIGHTBOX] module loaded");function B({root:r="#project-lightbox",closeDelayMs:s=1e3}={}){let o=document.querySelector(r);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let i=o.querySelector(".project-lightbox__inner"),l=o.querySelector(".video-area"),m=document.querySelectorAll(".slide"),d=matchMedia("(prefers-reduced-motion: reduce)").matches,p=!1,h=null;function y(t){Array.from(document.body.children).filter(c=>c!==o).forEach(c=>{try{"inert"in c&&(c.inert=!!t)}catch{}t?c.setAttribute("aria-hidden","true"):c.removeAttribute("aria-hidden")})}function E(t){if(t.key!=="Tab")return;let n=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),c=Array.from(n).filter(f=>!f.hasAttribute("disabled")&&!f.getAttribute("aria-hidden"));if(c.length===0){t.preventDefault(),(i||o).focus();return}let a=c[0],u=c[c.length-1];t.shiftKey&&document.activeElement===a?(t.preventDefault(),u.focus()):!t.shiftKey&&document.activeElement===u&&(t.preventDefault(),a.focus())}function L(t){var v,w,A;if(p)return;p=!0,h=document.activeElement instanceof HTMLElement?document.activeElement:null;let n=((v=t==null?void 0:t.dataset)==null?void 0:v.video)||"",c=((w=t==null?void 0:t.dataset)==null?void 0:w.title)||"",a=((A=t==null?void 0:t.dataset)==null?void 0:A.text)||"",f=/\.webflow\.com$/.test(location.hostname)||/canvas\.webflow\.com$/.test(location.hostname)?0:1;l&&W(l,n,{autoplay:f,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),y(!0),H(),o.setAttribute("tabindex","-1"),(i||o).focus(),g("LIGHTBOX_OPEN",o,{video:n,title:c,text:a})}function e(){p&&(g("LIGHTBOX_CLOSE",o),d?(_({delayMs:0}),g("LIGHTBOX_CLOSED_DONE",o)):_({delayMs:s}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),y(!1),l&&(l.innerHTML=""),h&&document.body.contains(h)&&h.focus(),p=!1)}m.forEach(t=>t.addEventListener("click",()=>L(t))),o.addEventListener("click",t=>{(i&&!t.target.closest(".project-lightbox__inner")||!i&&t.target===o)&&e()}),document.addEventListener("keydown",t=>{o.getAttribute("data-open")==="true"&&(t.key==="Escape"&&e(),t.key==="Tab"&&E(t))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>_())}console.log("[WEBFLOW] module loaded");function N(r={}){let s=r.scrollerSelector||".perspective-wrapper",o=r.driverSelector||".slides .slide, .slide",i=r.initEventName||"logo-start",l=r.playEventName||"logo-shrink",m=r.resetEventName||i||"logo-start",d=r.reverseEventName||"logo-grow",p=r.start||"top top",h=r.end||"bottom top",y=!!r.markers,E=typeof r.playThreshold=="number"?r.playThreshold:.02;function L(e){if(document.readyState==="complete"){setTimeout(e,0);return}window.addEventListener("load",e,{once:!0})}L(function(){let e=window.Webflow||[],t=()=>{try{return window.Webflow&&window.Webflow.require&&(window.Webflow.require("ix3")||window.Webflow.require("ix2"))}catch{try{return window.Webflow&&window.Webflow.require&&window.Webflow.require("ix2")}catch{return null}}},n=()=>{let c=t(),a=typeof window!="undefined"?window.ScrollTrigger:null;if(!c||!a)return;let u=document.querySelector(s),f=document.querySelector(o)||document.querySelector(".slide")||document.querySelector(".parallax-group:first-child");if(!u||!f)return;try{i&&(console.log("[WEBFLOW] emit init:",i),c.emit(i))}catch{}let v=!1,w=!1,A=0,O=0,I=6,j=250,G=a.create({trigger:f,scroller:u,start:"top top",end:"top -10%",markers:y,onLeave:()=>{if(!v){try{l&&(console.log("[WEBFLOW] emit play/onLeave:",l),c.emit(l))}catch{}v=!0,w=!1,A=performance.now()}},onEnterBack:()=>{},onLeaveBack:()=>{v=!1,w=!1}});try{console.log("[WEBFLOW] ScrollTrigger created",{trigger:f,driverSelector:o,scroller:u,start:"top top",end:"top -10%"})}catch{}let x=(u===window?window.scrollY:u.scrollTop)||0,F=()=>{let b=(u===window?window.scrollY:u.scrollTop)||0;if(x-b>I&&v&&!w){let C=performance.now();if(C-O<j){x=b;return}try{d&&(console.log("[WEBFLOW] emit reverse/scroll-start:",d),c.emit(d))}catch{}w=!0,O=C}x=b};try{u.addEventListener("scroll",F,{passive:!0})}catch{}};try{e.push(n)}catch{n()}})}function R(){let r=["autoplay","encrypted-media","picture-in-picture"],s=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(s).forEach(o=>{let i=(o.getAttribute("allow")||"").split(";").map(m=>m.trim()).filter(Boolean),l=Array.from(new Set([...i,...r])).join("; ");o.setAttribute("allow",l)})}function D(r={}){let s=r.lightboxRoot||"#project-lightbox";T(".accordeon"),B({root:s,closeDelayMs:1e3});try{N({scrollerSelector:".perspective-wrapper",initEventName:"logo-start",playEventName:"logo-shrink",resetEventName:"logo-start",reverseEventName:"logo-grow"})}catch{}}window.App||(window.App={});window.App.init=D;document.addEventListener("DOMContentLoaded",()=>{try{R(),D()}catch(r){console.error("[App] init error",r)}});})();
