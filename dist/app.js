(()=>{function O(c,l=window,o={}){try{l.dispatchEvent(new CustomEvent(c,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(c,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function T(c=".accordeon"){let l=document.querySelector(c);if(!l){console.log("[ACCORDION] root not found");return}let o=e=>e==null?void 0:e.querySelector(":scope > .acc-list"),m=e=>{let t=e.parentElement;return t!=null&&t.classList.contains("acc-list")?t:l},r=(...e)=>{try{console.log("[ACCORDION]",...e)}catch{}},w=e=>{var t;return(t=e==null?void 0:e.classList)!=null&&t.contains("acc-section")?"section":"item"},b=e=>{let t=e==null?void 0:e.querySelector(":scope > .acc-trigger");return((t==null?void 0:t.textContent)||"").trim().replace(/\s+/g," ").slice(0,80)},g="acc-trigger--active",a="acc-anim";function p(e){l.querySelectorAll(".acc-list."+a).forEach(t=>t.classList.remove(a)),e&&e.classList.add(a)}let h=window.Webflow&&window.Webflow.require?window.Webflow.require("ix3")||window.Webflow.require("ix2"):null;r("Webflow IX available:",!!h);function S(e){try{if(h&&typeof h.emit=="function")return r("wfIx.emit",e),h.emit(e),!0}catch(t){r("wfIx.emit error",t&&t.message)}try{return window.dispatchEvent(new CustomEvent(e)),r("window.dispatchEvent",e),!1}catch{return!1}}function L(e){let t=[];e==="acc-open"&&t.push("accordeon-open"),e==="acc-close"&&t.push("accordeon-close"),[e,...t].forEach(s=>S(s))}let n=l.querySelectorAll(".acc-trigger");n.forEach((e,t)=>{let s=e.closest(".acc-section, .acc-item"),i=o(s);if(i){let f=i.id||`acc-panel-${t}`;i.id=f,e.setAttribute("aria-controls",f),e.setAttribute("aria-expanded","false")}}),r("bootstrapped",n.length,"triggers");function x(e){var s;r("expand start",{id:e.id,children:(s=e.children)==null?void 0:s.length,h:e.scrollHeight}),e.classList.add("is-active"),Array.from(e.querySelectorAll(":scope > .acc-item")).forEach(i=>{i.style.removeProperty("opacity"),i.style.removeProperty("visibility"),i.style.removeProperty("transform")}),e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open",r("expanded",{id:e.id})))};e.addEventListener("transitionend",t)}function d(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let s=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",s),e.dataset.state="collapsed",e.classList.remove("is-active"),e.classList.remove(a),r("collapsed",{id:e.id}))};e.addEventListener("transitionend",s)}function y(e){let t=m(e);if(!t)return;let s=e.matches(".acc-section")?"acc-section":"acc-item";Array.from(t.children).forEach(i=>{var v;if(i===e||!i.classList.contains(s))return;let f=o(i);if(f&&(f.dataset.state==="open"||f.dataset.state==="opening")){r("close sibling",{kind:s,label:b(i),id:f.id}),p(f),setTimeout(()=>L("acc-close"),10),d(f);let W=i.querySelector(":scope > .acc-trigger");W==null||W.setAttribute("aria-expanded","false"),(v=W==null?void 0:W.classList)==null||v.remove(g)}})}function u(e){(e||l).querySelectorAll(".acc-item > .acc-list").forEach(s=>{var i;if(s.dataset.state==="open"||s.dataset.state==="opening"){d(s);let f=s.closest(".acc-item"),v=f==null?void 0:f.querySelector(":scope > .acc-trigger");v==null||v.setAttribute("aria-expanded","false"),(i=v==null?void 0:v.classList)==null||i.remove(g)}})}function E(e){var f,v;let t=o(e);if(!t)return;let s=e.querySelector(":scope > .acc-trigger"),i=!(t.dataset.state==="open"||t.dataset.state==="opening");r("toggle",{kind:w(e),opening:i,label:b(e),id:t.id}),i&&y(e),w(e)==="section"&&u(i?l:e),i?(p(t),setTimeout(()=>{r("emit acc-open",{id:t.id,animPanel:t.classList.contains(a),items:t.querySelectorAll(":scope > .acc-item").length}),L("acc-open")},10),x(t),s==null||s.setAttribute("aria-expanded","true"),(f=s==null?void 0:s.classList)==null||f.add(g)):(p(t),setTimeout(()=>{r("emit acc-close",{id:t.id,animPanel:t.classList.contains(a),items:t.querySelectorAll(":scope > .acc-item").length}),L("acc-close")},10),d(t),s==null||s.setAttribute("aria-expanded","false"),(v=s==null?void 0:s.classList)==null||v.remove(g))}document.body.classList.add("js-prep"),l.querySelectorAll(".acc-list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),Array.from(l.querySelectorAll(":scope > .acc-item")).forEach(e=>{e.style.removeProperty("opacity"),e.style.removeProperty("visibility"),e.style.removeProperty("transform")}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),l.addEventListener("click",e=>{let t=e.target.closest(".acc-trigger");if(!t||!l.contains(t))return;e.preventDefault();let s=t.closest(".acc-section, .acc-item");r("click",{label:(t.textContent||"").trim().replace(/\s+/g," ").slice(0,80)}),s&&E(s)}),l.addEventListener("keydown",e=>{let t=e.target.closest(".acc-trigger");if(!t||!l.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let s=t.closest(".acc-section, .acc-item");r("keydown",{key:e.key,label:(t.textContent||"").trim().replace(/\s+/g," ").slice(0,80)}),s&&E(s)});let A=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});l.querySelectorAll(".acc-list").forEach(e=>A.observe(e))}var q=0,B=0,F="";function C(){if(q++)return;let c=document.documentElement;F=c.style.scrollBehavior,c.style.scrollBehavior="auto",B=window.scrollY||c.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${B}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function k({delayMs:c=0}={}){let l=()=>{if(--q>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=F||"",window.scrollTo(0,B)};c?setTimeout(l,c):l()}console.log("[VIMEO] module loaded");function M(c){var o;if(!c)return"";let l=String(c).trim();if(/^\d+$/.test(l))return l;try{let m=new URL(l,"https://example.com");if((m.hostname||"").includes("vimeo.com")){let w=m.pathname.split("/").filter(Boolean);return((o=(w[w.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function I(c,l,o={}){if(!c)return;let m=M(l);if(!m){c.innerHTML="";return}let r=new URLSearchParams({dnt:1,...o}).toString(),w=`https://player.vimeo.com/video/${m}?${r}`,b=document.createElement("iframe");b.src=w,b.allow="autoplay; fullscreen; picture-in-picture; encrypted-media",b.setAttribute("frameborder","0"),b.style.width="100%",b.style.height="100%",c.innerHTML="",c.appendChild(b)}console.log("[LIGHTBOX] module loaded");function H({root:c="#project-lightbox",closeDelayMs:l=1e3}={}){let o=document.querySelector(c);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let m=o.querySelector(".project-lightbox__inner"),r=o.querySelector(".video-area"),w=document.querySelectorAll(".slide"),b=matchMedia("(prefers-reduced-motion: reduce)").matches,g=!1,a=null;function p(n){Array.from(document.body.children).filter(d=>d!==o).forEach(d=>{try{"inert"in d&&(d.inert=!!n)}catch{}n?d.setAttribute("aria-hidden","true"):d.removeAttribute("aria-hidden")})}function h(n){if(n.key!=="Tab")return;let x=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),d=Array.from(x).filter(E=>!E.hasAttribute("disabled")&&!E.getAttribute("aria-hidden"));if(d.length===0){n.preventDefault(),(m||o).focus();return}let y=d[0],u=d[d.length-1];n.shiftKey&&document.activeElement===y?(n.preventDefault(),u.focus()):!n.shiftKey&&document.activeElement===u&&(n.preventDefault(),y.focus())}function S(n){var A,e,t;if(g)return;g=!0,a=document.activeElement instanceof HTMLElement?document.activeElement:null;let x=((A=n==null?void 0:n.dataset)==null?void 0:A.video)||"",d=((e=n==null?void 0:n.dataset)==null?void 0:e.title)||"",y=((t=n==null?void 0:n.dataset)==null?void 0:t.text)||"",E=/\.webflow\.com$/.test(location.hostname)||/canvas\.webflow\.com$/.test(location.hostname)?0:1;r&&I(r,x,{autoplay:E,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),p(!0),C(),o.setAttribute("tabindex","-1"),(m||o).focus(),O("LIGHTBOX_OPEN",o,{video:x,title:d,text:y})}function L(){g&&(O("LIGHTBOX_CLOSE",o),b?(k({delayMs:0}),O("LIGHTBOX_CLOSED_DONE",o)):k({delayMs:l}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),p(!1),r&&(r.innerHTML=""),a&&document.body.contains(a)&&a.focus(),g=!1)}w.forEach(n=>n.addEventListener("click",()=>S(n))),o.addEventListener("click",n=>{(m&&!n.target.closest(".project-lightbox__inner")||!m&&n.target===o)&&L()}),document.addEventListener("keydown",n=>{o.getAttribute("data-open")==="true"&&(n.key==="Escape"&&L(),n.key==="Tab"&&h(n))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>k())}console.log("[WEBFLOW] module loaded");function _(c={}){let l=c.scrollerSelector||".perspective-wrapper",o=c.initEventName||"logo-start",m=c.shrinkEventName||c.playEventName||"logo-shrink",r=c.growEventName||"logo-grow",w=!!c.markers;function b(g){if(document.readyState==="complete"){setTimeout(g,0);return}window.addEventListener("load",g,{once:!0})}b(function(){(window.Webflow||[]).push(function(){let a=window.Webflow&&window.Webflow.require?window.Webflow.require("ix3")||window.Webflow.require("ix2"):null,p=window.ScrollTrigger;if(!a||!p)return;let h=document.querySelector(l);if(!h)return;let S=h.querySelector(".slide")||document.querySelector(".slide");if(!S){console.error("[WEBFLOW] Driver slide not found");return}let L=Array.from(h.querySelectorAll(".slide")),n=L.length>0?L[L.length-1]:null;n||console.warn("[WEBFLOW] No slides found, last slide detection disabled"),console.log("[WEBFLOW] Setup complete:",{scroller:!!h,driver:!!S,lastSlide:!!n,totalSlides:L.length,wfIx:!!a,ScrollTrigger:!!p,initEvent:o,shrinkEvent:m,growEvent:r});let x=!1,d=!1,y=!1,u=!1,E=!1;p.create({trigger:S,scroller:h,start:"top top",end:"top -10%",markers:w,onLeave:()=>{if(!x&&!d){x=!0;try{console.log("[WEBFLOW] emit shrink (scrolled down past first slide):",m),a.emit(m),d=!0,y=!1}catch{}}},onEnterBack:()=>{x=!1,d=!1,y=!1,u=!1,E=!1;try{console.log("[WEBFLOW] emit start (return to top):",o),console.log("[WEBFLOW] wfIx available:",!!a,"emit available:",typeof(a==null?void 0:a.emit)),a&&typeof a.emit=="function"?(a.emit(o),console.log("[WEBFLOW] return-to-top event emitted successfully")):console.error("[WEBFLOW] Cannot emit return-to-top: wfIx.emit not available")}catch(i){console.error("[WEBFLOW] Error emitting return-to-top:",i)}}}),n&&p.create({trigger:n,scroller:h,start:"top bottom",end:"bottom top",markers:w,onEnter:()=>{if(!u&&!E){u=!0;try{console.log("[WEBFLOW] emit grow (reached last slide):",r),a.emit(r),E=!0,d=!1,y=!1}catch{}}},onLeaveBack:()=>{if(u&&E){u=!1;try{console.log("[WEBFLOW] emit shrink (scrolling up from last slide):",m),a.emit(m),E=!1,d=!0,y=!1}catch{}}}});let A=h.scrollTop,e=0;p.create({scroller:h,start:0,end:()=>p.maxScroll(h),onUpdate:i=>{let f=h.scrollTop,v=f>A?1:f<A?-1:e;if(x&&!u&&d&&!y&&v===-1&&e!==-1)try{console.log("[WEBFLOW] emit grow (scroll up in middle section):",r),a.emit(r),y=!0,d=!1}catch{}x&&!u&&y&&v===1&&e!==1&&(d=!1,y=!1,console.log("[WEBFLOW] Reset flags - ready to shrink again")),A=f,e=v}}),console.log("[WEBFLOW] ScrollTrigger initialized");let t=(i,f)=>{try{return console.log(`[WEBFLOW] ${f}:`,i),a&&typeof a.emit=="function"?(a.emit(i),console.log(`[WEBFLOW] \u2713 Emitted ${i} - If nothing happens, check Webflow config:`),console.log(`[WEBFLOW]   1. Event name must be exactly: "${i}"`),console.log('[WEBFLOW]   2. Control must NOT be "No Action"'),console.log("[WEBFLOW]   3. Must target the logo element"),console.log("[WEBFLOW]   4. Timeline must be set correctly"),!0):(console.error("[WEBFLOW] \u2717 wfIx.emit not available"),!1)}catch(v){return console.error(`[WEBFLOW] \u2717 Error emitting ${i}:`,v),!1}},s=!1;requestAnimationFrame(()=>{p.refresh(),setTimeout(()=>{s||(t(r,"Initial load - grow"),s=!0)},200)})})})}function N(c={}){if(!(typeof window.matchMedia=="function"?window.matchMedia("(pointer: fine)").matches:!0)||document.getElementById("mccann-custom-cursor"))return;let o=c.clickableSelector||"a[href]",m=document.createElement("style");m.id="mccann-custom-cursor-style",m.textContent=`
    /* Hide native cursor everywhere, including pseudo elements */
    .has-custom-cursor,
    .has-custom-cursor * { cursor: none !important; }
    .has-custom-cursor *::before,
    .has-custom-cursor *::after { cursor: none !important; }

    .custom-cursor {
      position: fixed;
      left: 0;
      top: 0;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #0a3d91; /* dark blue */
      pointer-events: none;
      z-index: 2147483647;
      transform: translate3d(-9999px, -9999px, 0) translate(-50%, -50%) scale(0.3);
      opacity: 0;
      transition: transform 120ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 80ms linear;
      will-change: transform, opacity;
    }

    .custom-cursor.is-visible { opacity: 1; }

    @media (prefers-reduced-motion: reduce) {
      .custom-cursor { transition: none; }
    }
  `,document.head.appendChild(m),document.documentElement.classList.add("has-custom-cursor");let r=document.createElement("div");r.id="mccann-custom-cursor",r.className="custom-cursor",r.setAttribute("aria-hidden","true"),document.body.appendChild(r);let w=0,b=0,g=!1,a=0,p=!1,h=typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1;function S(){if(a=0,!p)return;p=!1;let u=g?1:.3;r.style.transform=`translate3d(${w}px, ${b}px, 0) translate(-50%, -50%) scale(${u})`}function L(){a||(a=requestAnimationFrame(S))}function n(u){u?r.classList.add("is-visible"):r.classList.remove("is-visible")}function x(u){let A=!!(u&&u.closest?u.closest(o):null);A!==g&&(h||(A?r.style.transition="transform 45ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 80ms linear":r.style.transition="transform 120ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 80ms linear"),g=A,p=!0,L())}function d(u){w=u.clientX,b=u.clientY,x(u.target),n(!0),p=!0,L()}function y(u){u.relatedTarget==null&&n(!1)}return window.addEventListener("pointermove",d,{passive:!0}),window.addEventListener("mouseout",y,{passive:!0}),window.addEventListener("blur",()=>n(!1)),window.addEventListener("focus",()=>n(!0)),function(){window.removeEventListener("pointermove",d),window.removeEventListener("mouseout",y),document.documentElement.classList.remove("has-custom-cursor");try{r.remove()}catch{}try{m.remove()}catch{}}}function P(){let c=["autoplay","encrypted-media","picture-in-picture"],l=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(l).forEach(o=>{let m=(o.getAttribute("allow")||"").split(";").map(w=>w.trim()).filter(Boolean),r=Array.from(new Set([...m,...c])).join("; ");o.setAttribute("allow",r)})}function D(c={}){let l=c.lightboxRoot||"#project-lightbox";T(".accordeon"),H({root:l,closeDelayMs:1e3});try{N()}catch{}try{_({scrollerSelector:".perspective-wrapper",initEventName:"logo-start",shrinkEventName:"logo-shrink",growEventName:"logo-grow"})}catch{}}window.App||(window.App={});window.App.init=D;document.addEventListener("DOMContentLoaded",()=>{try{P(),D()}catch(c){console.error("[App] init error",c)}});})();
