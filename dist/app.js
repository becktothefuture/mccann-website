(()=>{function L(l,s=window,o={}){try{s.dispatchEvent(new CustomEvent(l,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(l,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function C(l=".accordeon"){let s=document.querySelector(l);if(!s){console.log("[ACCORDION] root not found");return}let o=e=>e.classList.contains("accordeon-item--level1"),u=e=>e.classList.contains("accordeon-item--level2"),a=e=>e==null?void 0:e.querySelector(":scope > .accordeon__list"),g=e=>o(e)?s:e.closest(".accordeon__list"),p=e=>Array.from(e?e.children:[]);function h(e,t){let r=a(e);if(!r)return;let i=o(e)?1:2,d=i===1?t==="in"?"ACC_L1_ITEMS_IN":"ACC_L1_ITEMS_OUT":t==="in"?"ACC_L2_ITEMS_IN":"ACC_L2_ITEMS_OUT",y=p(r);L(d,r,{level:i,direction:t,itemsLength:y.length})}s.querySelectorAll(".accordeon__trigger").forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0");let r=e.closest(".accordeon-item--level1, .accordeon-item--level2"),i=a(r);if(i){let d=i.id||`acc-panel-${t}`;i.id=d,e.setAttribute("aria-controls",d),e.setAttribute("aria-expanded","false")}});function c(e){e.classList.add("is-active"),e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=r=>{r.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function f(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let r=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",r),e.dataset.state="collapsed",e.classList.remove("is-active"))};e.addEventListener("transitionend",r)}function m(e){let t=g(e);if(!t)return;let r=o(e)?"accordeon-item--level1":"accordeon-item--level2";Array.from(t.children).forEach(i=>{var y;if(i===e||!((y=i.classList)!=null&&y.contains(r)))return;let d=a(i);if(d&&(d.dataset.state==="open"||d.dataset.state==="opening")){h(i,"out"),f(d);let v=i.querySelector(".accordeon__trigger");v==null||v.setAttribute("aria-expanded","false"),L(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",i,{source:"sibling"})}})}function w(){s.querySelectorAll(".accordeon-item--level2 .accordeon__list").forEach(e=>{var t;if(e.dataset.state==="open"||e.dataset.state==="opening"){f(e);let r=e.closest(".accordeon-item--level2");(t=r==null?void 0:r.querySelector(".accordeon__trigger"))==null||t.setAttribute("aria-expanded","false"),L("ACC_L2_CLOSE",r,{source:"reset-all"})}})}function E(e){let t=a(e);if(!t)return;let r=e.querySelector(".accordeon__trigger"),i=!(t.dataset.state==="open"||t.dataset.state==="opening");m(e),i&&o(e)&&w(),i?(c(t),r==null||r.setAttribute("aria-expanded","true"),h(e,"in"),L(o(e)?"ACC_L1_OPEN":"ACC_L2_OPEN",e,{opening:!0})):(h(e,"out"),f(t),r==null||r.setAttribute("aria-expanded","false"),o(e)&&w(),L(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",e,{opening:!1}))}document.body.classList.add("js-prep"),s.querySelectorAll(".accordeon__list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),s.addEventListener("click",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!s.contains(t))return;e.preventDefault();let r=t.closest(".accordeon-item--level1, .accordeon-item--level2");r&&E(r)}),s.addEventListener("keydown",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!s.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let r=t.closest(".accordeon-item--level1, .accordeon-item--level2");r&&E(r)});let n=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});s.querySelectorAll(".accordeon__list").forEach(e=>n.observe(e))}var B=0,O=0,T="";function k(){if(B++)return;let l=document.documentElement;T=l.style.scrollBehavior,l.style.scrollBehavior="auto",O=window.scrollY||l.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${O}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function W({delayMs:l=0}={}){let s=()=>{if(--B>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=T||"",window.scrollTo(0,O)};l?setTimeout(s,l):s()}console.log("[VIMEO] module loaded");function N(l){var o;if(!l)return"";let s=String(l).trim();if(/^\d+$/.test(s))return s;try{let u=new URL(s,"https://example.com");if((u.hostname||"").includes("vimeo.com")){let g=u.pathname.split("/").filter(Boolean);return((o=(g[g.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function F(l,s,o={}){if(!l)return;let u=N(s);if(!u){l.innerHTML="";return}let a=new URLSearchParams({dnt:1,...o}).toString(),g=`https://player.vimeo.com/video/${u}?${a}`,p=document.createElement("iframe");p.src=g,p.allow="autoplay; fullscreen; picture-in-picture; encrypted-media",p.setAttribute("frameborder","0"),p.style.width="100%",p.style.height="100%",l.innerHTML="",l.appendChild(p)}console.log("[LIGHTBOX] module loaded");function q({root:l="#project-lightbox",closeDelayMs:s=1e3}={}){let o=document.querySelector(l);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let u=o.querySelector(".project-lightbox__inner"),a=o.querySelector(".video-area"),g=document.querySelectorAll(".slide"),p=matchMedia("(prefers-reduced-motion: reduce)").matches,h=!1,c=null;function f(n){Array.from(document.body.children).filter(t=>t!==o).forEach(t=>{try{"inert"in t&&(t.inert=!!n)}catch{}n?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")})}function m(n){if(n.key!=="Tab")return;let e=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),t=Array.from(e).filter(d=>!d.hasAttribute("disabled")&&!d.getAttribute("aria-hidden"));if(t.length===0){n.preventDefault(),(u||o).focus();return}let r=t[0],i=t[t.length-1];n.shiftKey&&document.activeElement===r?(n.preventDefault(),i.focus()):!n.shiftKey&&document.activeElement===i&&(n.preventDefault(),r.focus())}function w(n){var y,v,S;if(h)return;h=!0,c=document.activeElement instanceof HTMLElement?document.activeElement:null;let e=((y=n==null?void 0:n.dataset)==null?void 0:y.video)||"",t=((v=n==null?void 0:n.dataset)==null?void 0:v.title)||"",r=((S=n==null?void 0:n.dataset)==null?void 0:S.text)||"",d=/\.webflow\.com$/.test(location.hostname)||/canvas\.webflow\.com$/.test(location.hostname)?0:1;a&&F(a,e,{autoplay:d,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),f(!0),k(),o.setAttribute("tabindex","-1"),(u||o).focus(),L("LIGHTBOX_OPEN",o,{video:e,title:t,text:r})}function E(){h&&(L("LIGHTBOX_CLOSE",o),p?(W({delayMs:0}),L("LIGHTBOX_CLOSED_DONE",o)):W({delayMs:s}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),f(!1),a&&(a.innerHTML=""),c&&document.body.contains(c)&&c.focus(),h=!1)}g.forEach(n=>n.addEventListener("click",()=>w(n))),o.addEventListener("click",n=>{(u&&!n.target.closest(".project-lightbox__inner")||!u&&n.target===o)&&E()}),document.addEventListener("keydown",n=>{o.getAttribute("data-open")==="true"&&(n.key==="Escape"&&E(),n.key==="Tab"&&m(n))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>W())}console.log("[WEBFLOW] module loaded");function H(l={}){let s=l.scrollerSelector||".perspective-wrapper",o=l.initEventName||"logo-start",u=l.shrinkEventName||l.playEventName||"logo-shrink",a=l.growEventName||"logo-grow",g=!!l.markers;function p(h){if(document.readyState==="complete"){setTimeout(h,0);return}window.addEventListener("load",h,{once:!0})}p(function(){(window.Webflow||[]).push(function(){let c=window.Webflow&&window.Webflow.require?window.Webflow.require("ix3")||window.Webflow.require("ix2"):null,f=window.ScrollTrigger;if(!c||!f)return;let m=document.querySelector(s);if(!m)return;let w=m.querySelector(".slide")||document.querySelector(".slide");if(!w){console.error("[WEBFLOW] Driver slide not found");return}let E=Array.from(m.querySelectorAll(".slide")),n=E.length>0?E[E.length-1]:null;n||console.warn("[WEBFLOW] No slides found, last slide detection disabled"),console.log("[WEBFLOW] Setup complete:",{scroller:!!m,driver:!!w,lastSlide:!!n,totalSlides:E.length,wfIx:!!c,ScrollTrigger:!!f,initEvent:o,shrinkEvent:u,growEvent:a});let e=!1,t=!1,r=!1,i=!1,d=!1;f.create({trigger:w,scroller:m,start:"top top",end:"top -10%",markers:g,onLeave:()=>{if(!e&&!t){e=!0;try{console.log("[WEBFLOW] emit shrink (scrolled down past first slide):",u),c.emit(u),t=!0,r=!1}catch{}}},onEnterBack:()=>{e=!1,t=!1,r=!1,i=!1,d=!1;try{console.log("[WEBFLOW] emit start (return to top):",o),console.log("[WEBFLOW] wfIx available:",!!c,"emit available:",typeof(c==null?void 0:c.emit)),c&&typeof c.emit=="function"?(c.emit(o),console.log("[WEBFLOW] return-to-top event emitted successfully")):console.error("[WEBFLOW] Cannot emit return-to-top: wfIx.emit not available")}catch(b){console.error("[WEBFLOW] Error emitting return-to-top:",b)}}}),n&&f.create({trigger:n,scroller:m,start:"top bottom",end:"bottom top",markers:g,onEnter:()=>{if(!i&&!d){i=!0;try{console.log("[WEBFLOW] emit grow (reached last slide):",a),c.emit(a),d=!0,t=!1,r=!1}catch{}}},onLeaveBack:()=>{if(i&&d){i=!1;try{console.log("[WEBFLOW] emit shrink (scrolling up from last slide):",u),c.emit(u),d=!1,t=!0,r=!1}catch{}}}});let y=m.scrollTop,v=0;f.create({scroller:m,start:0,end:()=>f.maxScroll(m),onUpdate:b=>{let A=m.scrollTop,_=A>y?1:A<y?-1:v;if(e&&!i&&t&&!r&&_===-1&&v!==-1)try{console.log("[WEBFLOW] emit grow (scroll up in middle section):",a),c.emit(a),r=!0,t=!1}catch{}e&&!i&&r&&_===1&&v!==1&&(t=!1,r=!1,console.log("[WEBFLOW] Reset flags - ready to shrink again")),y=A,v=_}}),console.log("[WEBFLOW] ScrollTrigger initialized");let S=(b,A)=>{try{return console.log(`[WEBFLOW] ${A}:`,b),c&&typeof c.emit=="function"?(c.emit(b),console.log(`[WEBFLOW] \u2713 Emitted ${b} - If nothing happens, check Webflow config:`),console.log(`[WEBFLOW]   1. Event name must be exactly: "${b}"`),console.log('[WEBFLOW]   2. Control must NOT be "No Action"'),console.log("[WEBFLOW]   3. Must target the logo element"),console.log("[WEBFLOW]   4. Timeline must be set correctly"),!0):(console.error("[WEBFLOW] \u2717 wfIx.emit not available"),!1)}catch(_){return console.error(`[WEBFLOW] \u2717 Error emitting ${b}:`,_),!1}},x=!1;requestAnimationFrame(()=>{f.refresh(),setTimeout(()=>{x||(S(a,"Initial load - grow"),x=!0)},200)})})})}function D(){let l=["autoplay","encrypted-media","picture-in-picture"],s=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(s).forEach(o=>{let u=(o.getAttribute("allow")||"").split(";").map(g=>g.trim()).filter(Boolean),a=Array.from(new Set([...u,...l])).join("; ");o.setAttribute("allow",a)})}function I(l={}){let s=l.lightboxRoot||"#project-lightbox";C(".accordeon"),q({root:s,closeDelayMs:1e3});try{H({scrollerSelector:".perspective-wrapper",initEventName:"logo-start",shrinkEventName:"logo-shrink",growEventName:"logo-grow"})}catch{}}window.App||(window.App={});window.App.init=I;document.addEventListener("DOMContentLoaded",()=>{try{D(),I()}catch(l){console.error("[App] init error",l)}});})();
