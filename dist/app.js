(()=>{function h(n,c=window,o={}){try{c.dispatchEvent(new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(n,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function A(n=".accordeon"){let c=document.querySelector(n);if(!c){console.log("[ACCORDION] root not found");return}let o=e=>e.classList.contains("accordeon-item--level1"),s=e=>e.classList.contains("accordeon-item--level2"),l=e=>e==null?void 0:e.querySelector(":scope > .accordeon__list"),d=e=>o(e)?c:e.closest(".accordeon__list");c.querySelectorAll(".accordeon__trigger").forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0");let r=e.closest(".accordeon-item--level1, .accordeon-item--level2"),i=l(r);if(i){let a=i.id||`acc-panel-${t}`;i.id=a,e.setAttribute("aria-controls",a),e.setAttribute("aria-expanded","false")}});function f(e){e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=r=>{r.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function p(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let r=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",r),e.dataset.state="collapsed")};e.addEventListener("transitionend",r)}function g(e){let t=d(e);if(!t)return;let r=o(e)?"accordeon-item--level1":"accordeon-item--level2";Array.from(t.children).forEach(i=>{var m;if(i===e||!((m=i.classList)!=null&&m.contains(r)))return;let a=l(i);if(a&&(a.dataset.state==="open"||a.dataset.state==="opening")){p(a);let u=i.querySelector(".accordeon__trigger");u==null||u.setAttribute("aria-expanded","false"),h(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",i,{source:"sibling"})}})}function w(){c.querySelectorAll(".accordeon-item--level2 .accordeon__list").forEach(e=>{var t;if(e.dataset.state==="open"||e.dataset.state==="opening"){p(e);let r=e.closest(".accordeon-item--level2");(t=r==null?void 0:r.querySelector(".accordeon__trigger"))==null||t.setAttribute("aria-expanded","false"),h("ACC_L2_CLOSE",r,{source:"reset-all"})}})}function b(e){let t=l(e);if(!t)return;let r=e.querySelector(".accordeon__trigger"),i=!(t.dataset.state==="open"||t.dataset.state==="opening");g(e),i&&o(e)&&w(),i?(f(t),r==null||r.setAttribute("aria-expanded","true"),h(o(e)?"ACC_L1_OPEN":"ACC_L2_OPEN",e,{opening:!0})):(p(t),r==null||r.setAttribute("aria-expanded","false"),o(e)&&w(),h(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",e,{opening:!1}))}document.body.classList.add("js-prep"),c.querySelectorAll(".accordeon__list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),c.addEventListener("click",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!c.contains(t))return;e.preventDefault();let r=t.closest(".accordeon-item--level1, .accordeon-item--level2");r&&b(r)}),c.addEventListener("keydown",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!c.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let r=t.closest(".accordeon-item--level1, .accordeon-item--level2");r&&b(r)});let y=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});c.querySelectorAll(".accordeon__list").forEach(e=>y.observe(e))}var x=0,S=0,L="";function _(){if(x++)return;let n=document.documentElement;L=n.style.scrollBehavior,n.style.scrollBehavior="auto",S=window.scrollY||n.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${S}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function E({delayMs:n=0}={}){let c=()=>{if(--x>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=L||"",window.scrollTo(0,S)};n?setTimeout(c,n):c()}console.log("[VIMEO] module loaded");function q(n){var o;if(!n)return"";let c=String(n).trim();if(/^\d+$/.test(c))return c;try{let s=new URL(c,"https://example.com");if((s.hostname||"").includes("vimeo.com")){let d=s.pathname.split("/").filter(Boolean);return((o=(d[d.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function T(n,c,o={}){if(!n)return;let s=q(c);if(!s){n.innerHTML="";return}let l=new URLSearchParams({dnt:1,...o}).toString(),d=`https://player.vimeo.com/video/${s}?${l}`,f=document.createElement("iframe");f.src=d,f.allow="autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope; clipboard-write; web-share",f.setAttribute("frameborder","0"),f.style.width="100%",f.style.height="100%",n.innerHTML="",n.appendChild(f)}console.log("[LIGHTBOX] module loaded");function C({root:n="#project-lightbox",closeDelayMs:c=1e3}={}){let o=document.querySelector(n);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let s=o.querySelector(".project-lightbox__inner"),l=o.querySelector(".video-area"),d=document.querySelectorAll(".slide"),f=matchMedia("(prefers-reduced-motion: reduce)").matches,p=!1,g=null;function w(t){Array.from(document.body.children).filter(i=>i!==o).forEach(i=>{try{"inert"in i&&(i.inert=!!t)}catch{}t?i.setAttribute("aria-hidden","true"):i.removeAttribute("aria-hidden")})}function b(t){if(t.key!=="Tab")return;let r=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),i=Array.from(r).filter(u=>!u.hasAttribute("disabled")&&!u.getAttribute("aria-hidden"));if(i.length===0){t.preventDefault(),(s||o).focus();return}let a=i[0],m=i[i.length-1];t.shiftKey&&document.activeElement===a?(t.preventDefault(),m.focus()):!t.shiftKey&&document.activeElement===m&&(t.preventDefault(),a.focus())}function y(t){var m,u,v;if(p)return;p=!0,g=document.activeElement instanceof HTMLElement?document.activeElement:null;let r=((m=t==null?void 0:t.dataset)==null?void 0:m.video)||"",i=((u=t==null?void 0:t.dataset)==null?void 0:u.title)||"",a=((v=t==null?void 0:t.dataset)==null?void 0:v.text)||"";l&&T(l,r,{autoplay:1,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),w(!0),_(),o.setAttribute("tabindex","-1"),(s||o).focus(),h("LIGHTBOX_OPEN",o,{video:r,title:i,text:a})}function e(){p&&(h("LIGHTBOX_CLOSE",o),f?(E({delayMs:0}),h("LIGHTBOX_CLOSED_DONE",o)):E({delayMs:c}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),w(!1),l&&(l.innerHTML=""),g&&document.body.contains(g)&&g.focus(),p=!1)}d.forEach(t=>t.addEventListener("click",()=>y(t))),o.addEventListener("click",t=>{(s&&!t.target.closest(".project-lightbox__inner")||!s&&t.target===o)&&e()}),document.addEventListener("keydown",t=>{o.getAttribute("data-open")==="true"&&(t.key==="Escape"&&e(),t.key==="Tab"&&b(t))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>E())}console.log("[WF-IX] module loaded");function O(n={}){let c=n.scrollerSelector||".perspective-wrapper",o=n.driverSelector||".slide--scroll-driver",s=n.initEventName||"logo-start",l=n.playEventName||"logo-shrink",d=n.resetEventName||s||"logo-start",f=n.start||"top top",p=n.end||"bottom top",g=!!n.markers,w=typeof n.playThreshold=="number"?n.playThreshold:.02;function b(y){if(document.readyState==="complete"){setTimeout(y,0);return}window.addEventListener("load",y,{once:!0})}b(function(){let y=window.Webflow||[],e=()=>{try{return window.Webflow&&window.Webflow.require&&(window.Webflow.require("ix3")||window.Webflow.require("ix2"))}catch{try{return window.Webflow&&window.Webflow.require&&window.Webflow.require("ix2")}catch{return null}}},t=()=>{let r=e(),i=typeof window!="undefined"?window.ScrollTrigger:null;if(!r||!i)return;let a=document.querySelector(c),m=document.querySelector(o)||document.querySelector(".parallax-group:first-child");if(!a||!m)return;try{s&&r.emit(s)}catch{}let u=!1;i.create({trigger:m,scroller:a,start:"top top",end:"top -10%",markers:g,onLeave:()=>{if(!u){try{l&&r.emit(l)}catch{}u=!0}},onEnterBack:()=>{u=!1;try{d&&r.emit(d)}catch{}}})};try{y.push(t)}catch{t()}})}function H(){let n=["accelerometer","autoplay","clipboard-write","encrypted-media","gyroscope","picture-in-picture","web-share"],c=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(c).forEach(o=>{let s=(o.getAttribute("allow")||"").split(";").map(d=>d.trim()).filter(Boolean),l=Array.from(new Set([...s,...n])).join("; ");o.setAttribute("allow",l)})}function k(n={}){let c=n.lightboxRoot||"#project-lightbox";A(".accordeon"),C({root:c,closeDelayMs:1e3});try{O({scrollerSelector:".perspective-wrapper",driverSelector:".slide--scroll-driver",initEventName:"logo-start",playEventName:"logo-shrink",resetEventName:"logo-start",playThreshold:.02})}catch{}}window.App||(window.App={});window.App.init=k;document.addEventListener("DOMContentLoaded",()=>{try{H(),k()}catch(n){console.error("[App] init error",n)}});})();
