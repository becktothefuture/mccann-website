(()=>{function E(r,c=window,o={}){try{c.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(r,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function H(r=".accordeon"){let c=document.querySelector(r);if(!c){console.log("[ACCORDION] root not found");return}let o=e=>e.classList.contains("accordeon-item--level1"),l=e=>e.classList.contains("accordeon-item--level2"),d=e=>e==null?void 0:e.querySelector(":scope > .accordeon__list"),m=e=>o(e)?c:e.closest(".accordeon__list");c.querySelectorAll(".accordeon__trigger").forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0");let n=e.closest(".accordeon-item--level1, .accordeon-item--level2"),i=d(n);if(i){let g=i.id||`acc-panel-${t}`;i.id=g,e.setAttribute("aria-controls",g),e.setAttribute("aria-expanded","false")}});function p(e){e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=n=>{n.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function f(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let n=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",n),e.dataset.state="collapsed")};e.addEventListener("transitionend",n)}function h(e){let t=m(e);if(!t)return;let n=o(e)?"accordeon-item--level1":"accordeon-item--level2";Array.from(t.children).forEach(i=>{var S;if(i===e||!((S=i.classList)!=null&&S.contains(n)))return;let g=d(i);if(g&&(g.dataset.state==="open"||g.dataset.state==="opening")){f(g);let b=i.querySelector(".accordeon__trigger");b==null||b.setAttribute("aria-expanded","false"),E(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",i,{source:"sibling"})}})}function w(){c.querySelectorAll(".accordeon-item--level2 .accordeon__list").forEach(e=>{var t;if(e.dataset.state==="open"||e.dataset.state==="opening"){f(e);let n=e.closest(".accordeon-item--level2");(t=n==null?void 0:n.querySelector(".accordeon__trigger"))==null||t.setAttribute("aria-expanded","false"),E("ACC_L2_CLOSE",n,{source:"reset-all"})}})}function a(e){let t=d(e);if(!t)return;let n=e.querySelector(".accordeon__trigger"),i=!(t.dataset.state==="open"||t.dataset.state==="opening");h(e),i&&o(e)&&w(),i?(p(t),n==null||n.setAttribute("aria-expanded","true"),E(o(e)?"ACC_L1_OPEN":"ACC_L2_OPEN",e,{opening:!0})):(f(t),n==null||n.setAttribute("aria-expanded","false"),o(e)&&w(),E(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",e,{opening:!1}))}document.body.classList.add("js-prep"),c.querySelectorAll(".accordeon__list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),c.addEventListener("click",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!c.contains(t))return;e.preventDefault();let n=t.closest(".accordeon-item--level1, .accordeon-item--level2");n&&a(n)}),c.addEventListener("keydown",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!c.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let n=t.closest(".accordeon-item--level1, .accordeon-item--level2");n&&a(n)});let y=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});c.querySelectorAll(".accordeon__list").forEach(e=>y.observe(e))}var q=0,k=0,M="";function D(){if(q++)return;let r=document.documentElement;M=r.style.scrollBehavior,r.style.scrollBehavior="auto",k=window.scrollY||r.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${k}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function T({delayMs:r=0}={}){let c=()=>{if(--q>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=M||"",window.scrollTo(0,k)};r?setTimeout(c,r):c()}console.log("[VIMEO] module loaded");function N(r){var o;if(!r)return"";let c=String(r).trim();if(/^\d+$/.test(c))return c;try{let l=new URL(c,"https://example.com");if((l.hostname||"").includes("vimeo.com")){let m=l.pathname.split("/").filter(Boolean);return((o=(m[m.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function B(r,c,o={}){if(!r)return;let l=N(c);if(!l){r.innerHTML="";return}let d=new URLSearchParams({dnt:1,...o}).toString(),m=`https://player.vimeo.com/video/${l}?${d}`,p=document.createElement("iframe");p.src=m,p.allow="autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope; clipboard-write; web-share",p.setAttribute("frameborder","0"),p.style.width="100%",p.style.height="100%",r.innerHTML="",r.appendChild(p)}console.log("[LIGHTBOX] module loaded");function I({root:r="#project-lightbox",closeDelayMs:c=1e3}={}){let o=document.querySelector(r);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let l=o.querySelector(".project-lightbox__inner"),d=o.querySelector(".video-area"),m=document.querySelectorAll(".slide"),p=matchMedia("(prefers-reduced-motion: reduce)").matches,f=!1,h=null;function w(t){Array.from(document.body.children).filter(i=>i!==o).forEach(i=>{try{"inert"in i&&(i.inert=!!t)}catch{}t?i.setAttribute("aria-hidden","true"):i.removeAttribute("aria-hidden")})}function a(t){if(t.key!=="Tab")return;let n=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),i=Array.from(n).filter(b=>!b.hasAttribute("disabled")&&!b.getAttribute("aria-hidden"));if(i.length===0){t.preventDefault(),(l||o).focus();return}let g=i[0],S=i[i.length-1];t.shiftKey&&document.activeElement===g?(t.preventDefault(),S.focus()):!t.shiftKey&&document.activeElement===S&&(t.preventDefault(),g.focus())}function y(t){var S,b,x;if(f)return;f=!0,h=document.activeElement instanceof HTMLElement?document.activeElement:null;let n=((S=t==null?void 0:t.dataset)==null?void 0:S.video)||"",i=((b=t==null?void 0:t.dataset)==null?void 0:b.title)||"",g=((x=t==null?void 0:t.dataset)==null?void 0:x.text)||"";d&&B(d,n,{autoplay:1,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),w(!0),D(),o.setAttribute("tabindex","-1"),(l||o).focus(),E("LIGHTBOX_OPEN",o,{video:n,title:i,text:g})}function e(){f&&(E("LIGHTBOX_CLOSE",o),p?(T({delayMs:0}),E("LIGHTBOX_CLOSED_DONE",o)):T({delayMs:c}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),w(!1),d&&(d.innerHTML=""),h&&document.body.contains(h)&&h.focus(),f=!1)}m.forEach(t=>t.addEventListener("click",()=>y(t))),o.addEventListener("click",t=>{(l&&!t.target.closest(".project-lightbox__inner")||!l&&t.target===o)&&e()}),document.addEventListener("keydown",t=>{o.getAttribute("data-open")==="true"&&(t.key==="Escape"&&e(),t.key==="Tab"&&a(t))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>T())}function P(r={}){let{selector:c=".slide",duration:o=.5,ease:l="expo.out",anchorRatio:d=.5,cooldownMs:m=420}=r;if(typeof window!="undefined"&&"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches)return;let f=typeof window!="undefined"&&(window.gsap||window.GSAP)||(typeof gsap!="undefined"?gsap:null);if(!f)return;let h=[],w=[],a=null,y=0;function e(){h=Array.from(document.querySelectorAll(c)),w=h.map(s=>Math.round(s.offsetTop))}function t(){var L;let s=window.scrollY+window.innerHeight*(isFinite(d)?d:.5),u=0,v=Math.abs(((L=w[0])!=null?L:0)-s);for(let A=1;A<w.length;A++){let O=Math.abs(w[A]-s);O<v&&(v=O,u=A)}return u}function n(s){if(s<0||s>=w.length)return;let u=performance.now();if(u-y<m)return;y=u;let v=w[s];a&&a.kill&&a.kill();let L=!!window.ScrollToPlugin;if(L&&f.registerPlugin)try{f.registerPlugin(window.ScrollToPlugin)}catch{}try{if(L){a=f.to(window,{scrollTo:{y:v,autoKill:!0},duration:o,ease:l,overwrite:"auto",onComplete:()=>{a=null}});return}}catch{}try{window.scrollTo({top:v,behavior:"smooth"}),a={kill(){a=null}},setTimeout(()=>{a=null},Math.max(250,o*1e3))}catch{window.scrollTo(0,v),a=null}}function i(s){if(!h.length)return;if(a){s.preventDefault();return}let u=s.deltaY||0;if(Math.abs(u)<2)return;s.preventDefault();let v=t();n(u>0?v+1:v-1)}let g=0;function S(s){let u=s.touches&&s.touches[0];g=u?u.clientY:0}function b(s){if(!h.length)return;let u=s.changedTouches&&s.changedTouches[0];if(!u)return;let v=g-u.clientY;if(Math.abs(v)<20)return;let L=t();n(v>0?L+1:L-1)}function x(){let s=document.activeElement;if(!s)return!1;let u=(s.tagName||"").toLowerCase();return u==="input"||u==="textarea"||s.isContentEditable}function C(s){if(x())return;let u=0;switch(s.code){case"ArrowDown":case"PageDown":case"Space":u=1;break;case"ArrowUp":case"PageUp":u=-1;break;case"Home":n(0),s.preventDefault();return;case"End":n(h.length-1),s.preventDefault();return;default:return}s.preventDefault();let v=t();n(v+u)}function j(){window.addEventListener("wheel",i,{passive:!1}),window.addEventListener("touchstart",S,{passive:!0}),window.addEventListener("touchend",b,{passive:!0}),window.addEventListener("keydown",C,{passive:!1}),window.addEventListener("resize",_),window.addEventListener("orientationchange",_)}function G(){window.removeEventListener("wheel",i),window.removeEventListener("touchstart",S),window.removeEventListener("touchend",b),window.removeEventListener("keydown",C),window.removeEventListener("resize",_),window.removeEventListener("orientationchange",_)}function _(){e()}if(e(),h.length!==0)return j(),function(){a&&a.kill&&a.kill(),G()}}console.log("[WF-IX] module loaded");function R(r={}){let c=r.scrollerSelector||".perspective-wrapper",o=r.driverSelector||".slide--scroll-driver",l=r.interactionOnLeave||"logo-shrink",d=r.interactionOnEnterBack||l||"logo-shrink",m=r.start||"top top",p=r.end||"bottom top",f=!!r.markers;function h(w){if(document.readyState==="complete"){setTimeout(w,0);return}window.addEventListener("load",w,{once:!0})}h(function(){let w=window.Webflow||[];try{w.push(function(){let a=window.Webflow&&window.Webflow.require?window.Webflow.require("ix2"):null,y=typeof window!="undefined"?window.ScrollTrigger:null;if(!a||!y)return;let e=document.querySelector(c),t=document.querySelector(o);!e||!t||y.create({trigger:t,scroller:e,start:m,end:p,markers:f,onLeave:()=>{try{l&&a.emit(l)}catch{}},onEnterBack:()=>{try{d&&a.emit(d)}catch{}}})})}catch{try{let y=window.Webflow&&window.Webflow.require?window.Webflow.require("ix2"):null,e=typeof window!="undefined"?window.ScrollTrigger:null;if(!y||!e)return;let t=document.querySelector(c),n=document.querySelector(o);if(!t||!n)return;e.create({trigger:n,scroller:t,start:m,end:p,markers:f,onLeave:()=>{try{l&&y.emit(l)}catch{}},onEnterBack:()=>{try{d&&y.emit(d)}catch{}}})}catch{}}})}function Y(){let r=["accelerometer","autoplay","clipboard-write","encrypted-media","gyroscope","picture-in-picture","web-share"],c=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(c).forEach(o=>{let l=(o.getAttribute("allow")||"").split(";").map(m=>m.trim()).filter(Boolean),d=Array.from(new Set([...l,...r])).join("; ");o.setAttribute("allow",d)})}function W(r={}){let c=r.lightboxRoot||"#project-lightbox";H(".accordeon"),I({root:c,closeDelayMs:1e3});try{P({selector:".slide",duration:.5,ease:"expo.out",anchorRatio:.5,cooldownMs:420})}catch{}try{R({scrollerSelector:".perspective-wrapper",driverSelector:".slide--scroll-driver"})}catch{}}window.App||(window.App={});window.App.init=W;document.addEventListener("DOMContentLoaded",()=>{try{Y(),W()}catch(r){console.error("[App] init error",r)}});})();
