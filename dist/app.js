(()=>{function w(n,s=window,o={}){try{s.dispatchEvent(new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(n,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function B(n=".accordeon"){let s=document.querySelector(n);if(!s){console.log("[ACCORDION] root not found");return}let o=e=>e==null?void 0:e.querySelector(":scope > .acc-list"),u=e=>{let t=e.parentElement;return t!=null&&t.classList.contains("acc-list")?t:s};s.querySelectorAll(".acc-trigger").forEach((e,t)=>{let i=e.closest(".acc-item"),d=o(i);if(d){let r=d.id||`acc-panel-${t}`;d.id=r,e.setAttribute("aria-controls",r),e.setAttribute("aria-expanded","false")}});function l(e){e.classList.add("is-active"),e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function f(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let i=d=>{d.propertyName==="max-height"&&(e.removeEventListener("transitionend",i),e.dataset.state="collapsed",e.classList.remove("is-active"))};e.addEventListener("transitionend",i)}function p(e){let t=u(e);t&&Array.from(t.children).forEach(i=>{if(i===e||!i.classList.contains("acc-item"))return;let d=o(i);if(d&&(d.dataset.state==="open"||d.dataset.state==="opening")){w("acc-close",d),f(d);let r=i.querySelector(":scope > .acc-trigger");r==null||r.setAttribute("aria-expanded","false")}})}function h(e){let t=o(e);if(!t)return;let i=e.querySelector(":scope > .acc-trigger"),d=!(t.dataset.state==="open"||t.dataset.state==="opening");p(e),d?(l(t),i==null||i.setAttribute("aria-expanded","true"),w("acc-open",t)):(w("acc-close",t),f(t),i==null||i.setAttribute("aria-expanded","false"))}document.body.classList.add("js-prep"),s.querySelectorAll(".acc-list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),Array.from(s.querySelectorAll(":scope > .acc-item")).forEach(e=>{e.style.removeProperty("opacity"),e.style.removeProperty("visibility"),e.style.removeProperty("transform")}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),s.addEventListener("click",e=>{let t=e.target.closest(".acc-trigger");if(!t||!s.contains(t))return;e.preventDefault();let i=t.closest(".acc-item");i&&h(i)}),s.addEventListener("keydown",e=>{let t=e.target.closest(".acc-trigger");if(!t||!s.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let i=t.closest(".acc-item");i&&h(i)});let a=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});s.querySelectorAll(".acc-list").forEach(e=>a.observe(e))}var T=0,O=0,F="";function q(){if(T++)return;let n=document.documentElement;F=n.style.scrollBehavior,n.style.scrollBehavior="auto",O=window.scrollY||n.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${O}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function S({delayMs:n=0}={}){let s=()=>{if(--T>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=F||"",window.scrollTo(0,O)};n?setTimeout(s,n):s()}console.log("[VIMEO] module loaded");function N(n){var o;if(!n)return"";let s=String(n).trim();if(/^\d+$/.test(s))return s;try{let u=new URL(s,"https://example.com");if((u.hostname||"").includes("vimeo.com")){let f=u.pathname.split("/").filter(Boolean);return((o=(f[f.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function H(n,s,o={}){if(!n)return;let u=N(s);if(!u){n.innerHTML="";return}let l=new URLSearchParams({dnt:1,...o}).toString(),f=`https://player.vimeo.com/video/${u}?${l}`,p=document.createElement("iframe");p.src=f,p.allow="autoplay; fullscreen; picture-in-picture; encrypted-media",p.setAttribute("frameborder","0"),p.style.width="100%",p.style.height="100%",n.innerHTML="",n.appendChild(p)}console.log("[LIGHTBOX] module loaded");function C({root:n="#project-lightbox",closeDelayMs:s=1e3}={}){let o=document.querySelector(n);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let u=o.querySelector(".project-lightbox__inner"),l=o.querySelector(".video-area"),f=document.querySelectorAll(".slide"),p=matchMedia("(prefers-reduced-motion: reduce)").matches,h=!1,a=null;function e(r){Array.from(document.body.children).filter(m=>m!==o).forEach(m=>{try{"inert"in m&&(m.inert=!!r)}catch{}r?m.setAttribute("aria-hidden","true"):m.removeAttribute("aria-hidden")})}function t(r){if(r.key!=="Tab")return;let g=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),m=Array.from(g).filter(b=>!b.hasAttribute("disabled")&&!b.getAttribute("aria-hidden"));if(m.length===0){r.preventDefault(),(u||o).focus();return}let c=m[0],y=m[m.length-1];r.shiftKey&&document.activeElement===c?(r.preventDefault(),y.focus()):!r.shiftKey&&document.activeElement===y&&(r.preventDefault(),c.focus())}function i(r){var L,E,W;if(h)return;h=!0,a=document.activeElement instanceof HTMLElement?document.activeElement:null;let g=((L=r==null?void 0:r.dataset)==null?void 0:L.video)||"",m=((E=r==null?void 0:r.dataset)==null?void 0:E.title)||"",c=((W=r==null?void 0:r.dataset)==null?void 0:W.text)||"",b=/\.webflow\.com$/.test(location.hostname)||/canvas\.webflow\.com$/.test(location.hostname)?0:1;l&&H(l,g,{autoplay:b,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),e(!0),q(),o.setAttribute("tabindex","-1"),(u||o).focus(),w("LIGHTBOX_OPEN",o,{video:g,title:m,text:c})}function d(){h&&(w("LIGHTBOX_CLOSE",o),p?(S({delayMs:0}),w("LIGHTBOX_CLOSED_DONE",o)):S({delayMs:s}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),e(!1),l&&(l.innerHTML=""),a&&document.body.contains(a)&&a.focus(),h=!1)}f.forEach(r=>r.addEventListener("click",()=>i(r))),o.addEventListener("click",r=>{(u&&!r.target.closest(".project-lightbox__inner")||!u&&r.target===o)&&d()}),document.addEventListener("keydown",r=>{o.getAttribute("data-open")==="true"&&(r.key==="Escape"&&d(),r.key==="Tab"&&t(r))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>S())}console.log("[WEBFLOW] module loaded");function _(n={}){let s=n.scrollerSelector||".perspective-wrapper",o=n.initEventName||"logo-start",u=n.shrinkEventName||n.playEventName||"logo-shrink",l=n.growEventName||"logo-grow",f=!!n.markers;function p(h){if(document.readyState==="complete"){setTimeout(h,0);return}window.addEventListener("load",h,{once:!0})}p(function(){(window.Webflow||[]).push(function(){let a=window.Webflow&&window.Webflow.require?window.Webflow.require("ix3")||window.Webflow.require("ix2"):null,e=window.ScrollTrigger;if(!a||!e)return;let t=document.querySelector(s);if(!t)return;let i=t.querySelector(".slide")||document.querySelector(".slide");if(!i){console.error("[WEBFLOW] Driver slide not found");return}let d=Array.from(t.querySelectorAll(".slide")),r=d.length>0?d[d.length-1]:null;r||console.warn("[WEBFLOW] No slides found, last slide detection disabled"),console.log("[WEBFLOW] Setup complete:",{scroller:!!t,driver:!!i,lastSlide:!!r,totalSlides:d.length,wfIx:!!a,ScrollTrigger:!!e,initEvent:o,shrinkEvent:u,growEvent:l});let g=!1,m=!1,c=!1,y=!1,b=!1;e.create({trigger:i,scroller:t,start:"top top",end:"top -10%",markers:f,onLeave:()=>{if(!g&&!m){g=!0;try{console.log("[WEBFLOW] emit shrink (scrolled down past first slide):",u),a.emit(u),m=!0,c=!1}catch{}}},onEnterBack:()=>{g=!1,m=!1,c=!1,y=!1,b=!1;try{console.log("[WEBFLOW] emit start (return to top):",o),console.log("[WEBFLOW] wfIx available:",!!a,"emit available:",typeof(a==null?void 0:a.emit)),a&&typeof a.emit=="function"?(a.emit(o),console.log("[WEBFLOW] return-to-top event emitted successfully")):console.error("[WEBFLOW] Cannot emit return-to-top: wfIx.emit not available")}catch(v){console.error("[WEBFLOW] Error emitting return-to-top:",v)}}}),r&&e.create({trigger:r,scroller:t,start:"top bottom",end:"bottom top",markers:f,onEnter:()=>{if(!y&&!b){y=!0;try{console.log("[WEBFLOW] emit grow (reached last slide):",l),a.emit(l),b=!0,m=!1,c=!1}catch{}}},onLeaveBack:()=>{if(y&&b){y=!1;try{console.log("[WEBFLOW] emit shrink (scrolling up from last slide):",u),a.emit(u),b=!1,m=!0,c=!1}catch{}}}});let L=t.scrollTop,E=0;e.create({scroller:t,start:0,end:()=>e.maxScroll(t),onUpdate:v=>{let x=t.scrollTop,A=x>L?1:x<L?-1:E;if(g&&!y&&m&&!c&&A===-1&&E!==-1)try{console.log("[WEBFLOW] emit grow (scroll up in middle section):",l),a.emit(l),c=!0,m=!1}catch{}g&&!y&&c&&A===1&&E!==1&&(m=!1,c=!1,console.log("[WEBFLOW] Reset flags - ready to shrink again")),L=x,E=A}}),console.log("[WEBFLOW] ScrollTrigger initialized");let W=(v,x)=>{try{return console.log(`[WEBFLOW] ${x}:`,v),a&&typeof a.emit=="function"?(a.emit(v),console.log(`[WEBFLOW] \u2713 Emitted ${v} - If nothing happens, check Webflow config:`),console.log(`[WEBFLOW]   1. Event name must be exactly: "${v}"`),console.log('[WEBFLOW]   2. Control must NOT be "No Action"'),console.log("[WEBFLOW]   3. Must target the logo element"),console.log("[WEBFLOW]   4. Timeline must be set correctly"),!0):(console.error("[WEBFLOW] \u2717 wfIx.emit not available"),!1)}catch(A){return console.error(`[WEBFLOW] \u2717 Error emitting ${v}:`,A),!1}},k=!1;requestAnimationFrame(()=>{e.refresh(),setTimeout(()=>{k||(W(l,"Initial load - grow"),k=!0)},200)})})})}function I(n={}){if(!(typeof window.matchMedia=="function"?window.matchMedia("(pointer: fine)").matches:!0)||document.getElementById("mccann-custom-cursor"))return;let o=n.clickableSelector||["a[href]","button",'[role="button"]',"[data-clickable]",'input:not([type="hidden"]):not([disabled])',"select:not([disabled])","textarea:not([disabled])","label",".w-inline-block",".w-tab-link",".w-dropdown-toggle",".w-nav-link","[data-w-id]",".slide",".w-slide",".swiper-slide",".splide__slide",'[tabindex]:not([tabindex="-1"])',"[onclick]"].join(","),u=document.createElement("style");u.id="mccann-custom-cursor-style",u.textContent=`
    /* Hide native cursor everywhere, including pseudo elements */
    .has-custom-cursor,
    .has-custom-cursor * { cursor: none !important; }
    .has-custom-cursor *::before,
    .has-custom-cursor *::after { cursor: none !important; }

    .custom-cursor {
      position: fixed;
      left: 0;
      top: 0;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #0a3d91; /* dark blue */
      pointer-events: none;
      z-index: 2147483647;
      transform: translate3d(-9999px, -9999px, 0) translate(-50%, -50%) scale(0.8);
      opacity: 0;
      transition: transform 120ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 80ms linear;
      will-change: transform, opacity;
    }

    .custom-cursor.is-visible { opacity: 1; }

    @media (prefers-reduced-motion: reduce) {
      .custom-cursor { transition: none; }
    }
  `,document.head.appendChild(u),document.documentElement.classList.add("has-custom-cursor");let l=document.createElement("div");l.id="mccann-custom-cursor",l.className="custom-cursor",l.setAttribute("aria-hidden","true"),document.body.appendChild(l);let f=0,p=0,h=!1,a=0,e=!1;function t(){if(a=0,!e)return;e=!1;let c=h?1:.8;l.style.transform=`translate3d(${f}px, ${p}px, 0) translate(-50%, -50%) scale(${c})`}function i(){a||(a=requestAnimationFrame(t))}function d(c){c?l.classList.add("is-visible"):l.classList.remove("is-visible")}function r(c){let b=!!(c&&c.closest?c.closest(o):null);b!==h&&(h=b,e=!0,i())}function g(c){f=c.clientX,p=c.clientY,r(c.target),d(!0),e=!0,i()}function m(c){c.relatedTarget==null&&d(!1)}return window.addEventListener("pointermove",g,{passive:!0}),window.addEventListener("mouseout",m,{passive:!0}),window.addEventListener("blur",()=>d(!1)),window.addEventListener("focus",()=>d(!0)),function(){window.removeEventListener("pointermove",g),window.removeEventListener("mouseout",m),document.documentElement.classList.remove("has-custom-cursor");try{l.remove()}catch{}try{u.remove()}catch{}}}function M(){let n=["autoplay","encrypted-media","picture-in-picture"],s=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(s).forEach(o=>{let u=(o.getAttribute("allow")||"").split(";").map(f=>f.trim()).filter(Boolean),l=Array.from(new Set([...u,...n])).join("; ");o.setAttribute("allow",l)})}function D(n={}){let s=n.lightboxRoot||"#project-lightbox";B(".accordeon"),C({root:s,closeDelayMs:1e3});try{I()}catch{}try{_({scrollerSelector:".perspective-wrapper",initEventName:"logo-start",shrinkEventName:"logo-shrink",growEventName:"logo-grow"})}catch{}}window.App||(window.App={});window.App.init=D;document.addEventListener("DOMContentLoaded",()=>{try{M(),D()}catch(n){console.error("[App] init error",n)}});})();
