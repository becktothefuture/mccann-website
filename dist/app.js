(()=>{function m(i,c=window,o={}){try{c.dispatchEvent(new CustomEvent(i,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(i,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function x(i=".accordeon"){let c=document.querySelector(i);if(!c){console.log("[ACCORDION] root not found");return}let o=e=>e.classList.contains("accordeon-item--level1"),a=e=>e.classList.contains("accordeon-item--level2"),l=e=>e==null?void 0:e.querySelector(":scope > .accordeon__list"),h=e=>o(e)?c:e.closest(".accordeon__list");c.querySelectorAll(".accordeon__trigger").forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0");let n=e.closest(".accordeon-item--level1, .accordeon-item--level2"),r=l(n);if(r){let s=r.id||`acc-panel-${t}`;r.id=s,e.setAttribute("aria-controls",s),e.setAttribute("aria-expanded","false")}});function d(e){e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=n=>{n.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function u(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let n=r=>{r.propertyName==="max-height"&&(e.removeEventListener("transitionend",n),e.dataset.state="collapsed")};e.addEventListener("transitionend",n)}function g(e){let t=h(e);if(!t)return;let n=o(e)?"accordeon-item--level1":"accordeon-item--level2";Array.from(t.children).forEach(r=>{var p;if(r===e||!((p=r.classList)!=null&&p.contains(n)))return;let s=l(r);if(s&&(s.dataset.state==="open"||s.dataset.state==="opening")){u(s);let f=r.querySelector(".accordeon__trigger");f==null||f.setAttribute("aria-expanded","false"),m(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",r,{source:"sibling"})}})}function y(){c.querySelectorAll(".accordeon-item--level2 .accordeon__list").forEach(e=>{var t;if(e.dataset.state==="open"||e.dataset.state==="opening"){u(e);let n=e.closest(".accordeon-item--level2");(t=n==null?void 0:n.querySelector(".accordeon__trigger"))==null||t.setAttribute("aria-expanded","false"),m("ACC_L2_CLOSE",n,{source:"reset-all"})}})}function v(e){let t=l(e);if(!t)return;let n=e.querySelector(".accordeon__trigger"),r=!(t.dataset.state==="open"||t.dataset.state==="opening");g(e),r&&o(e)&&y(),r?(d(t),n==null||n.setAttribute("aria-expanded","true"),m(o(e)?"ACC_L1_OPEN":"ACC_L2_OPEN",e,{opening:!0})):(u(t),n==null||n.setAttribute("aria-expanded","false"),o(e)&&y(),m(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",e,{opening:!1}))}document.body.classList.add("js-prep"),c.querySelectorAll(".accordeon__list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),c.addEventListener("click",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!c.contains(t))return;e.preventDefault();let n=t.closest(".accordeon-item--level1, .accordeon-item--level2");n&&v(n)}),c.addEventListener("keydown",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!c.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let n=t.closest(".accordeon-item--level1, .accordeon-item--level2");n&&v(n)});let A=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});c.querySelectorAll(".accordeon__list").forEach(e=>A.observe(e))}var _=0,L=0,S="";function C(){if(_++)return;let i=document.documentElement;S=i.style.scrollBehavior,i.style.scrollBehavior="auto",L=window.scrollY||i.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${L}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function b({delayMs:i=0}={}){let c=()=>{if(--_>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=S||"",window.scrollTo(0,L)};i?setTimeout(c,i):c()}console.log("[VIMEO] module loaded");function q(i){var o;if(!i)return"";let c=String(i).trim();if(/^\d+$/.test(c))return c;try{let a=new URL(c,"https://example.com");if((a.hostname||"").includes("vimeo.com")){let h=a.pathname.split("/").filter(Boolean);return((o=(h[h.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function O(i,c,o={}){if(!i)return;let a=q(c);if(!a){i.innerHTML="";return}let l=new URLSearchParams({dnt:1,...o}).toString(),h=`https://player.vimeo.com/video/${a}?${l}`,d=document.createElement("iframe");d.src=h,d.allow="autoplay; fullscreen; picture-in-picture",d.setAttribute("frameborder","0"),d.style.width="100%",d.style.height="100%",i.innerHTML="",i.appendChild(d)}console.log("[LIGHTBOX] module loaded");function w({root:i="#project-lightbox",closeDelayMs:c=1e3}={}){let o=document.querySelector(i);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let a=o.querySelector(".project-lightbox__inner"),l=o.querySelector(".video-area"),h=document.querySelectorAll(".slide"),d=matchMedia("(prefers-reduced-motion: reduce)").matches,u=!1,g=null;function y(t){Array.from(document.body.children).filter(r=>r!==o).forEach(r=>{try{"inert"in r&&(r.inert=!!t)}catch{}t?r.setAttribute("aria-hidden","true"):r.removeAttribute("aria-hidden")})}function v(t){if(t.key!=="Tab")return;let n=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),r=Array.from(n).filter(f=>!f.hasAttribute("disabled")&&!f.getAttribute("aria-hidden"));if(r.length===0){t.preventDefault(),(a||o).focus();return}let s=r[0],p=r[r.length-1];t.shiftKey&&document.activeElement===s?(t.preventDefault(),p.focus()):!t.shiftKey&&document.activeElement===p&&(t.preventDefault(),s.focus())}function A(t){var p,f,E;if(u)return;u=!0,g=document.activeElement instanceof HTMLElement?document.activeElement:null;let n=((p=t==null?void 0:t.dataset)==null?void 0:p.video)||"",r=((f=t==null?void 0:t.dataset)==null?void 0:f.title)||"",s=((E=t==null?void 0:t.dataset)==null?void 0:E.text)||"";l&&O(l,n,{autoplay:1,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),y(!0),C(),o.setAttribute("tabindex","-1"),(a||o).focus(),m("LIGHTBOX_OPEN",o,{video:n,title:r,text:s})}function e(){u&&(m("LIGHTBOX_CLOSE",o),d?(b({delayMs:0}),m("LIGHTBOX_CLOSED_DONE",o)):b({delayMs:c}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),y(!1),l&&(l.innerHTML=""),g&&document.body.contains(g)&&g.focus(),u=!1)}h.forEach(t=>t.addEventListener("click",()=>A(t))),o.addEventListener("click",t=>{(a&&!t.target.closest(".project-lightbox__inner")||!a&&t.target===o)&&e()}),document.addEventListener("keydown",t=>{o.getAttribute("data-open")==="true"&&(t.key==="Escape"&&e(),t.key==="Tab"&&v(t))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>b())}function H(i={}){let c=i.lightboxRoot||"#project-lightbox";x(".accordeon"),w({root:c,closeDelayMs:1e3})}window.App||(window.App={});window.App.init=H;document.addEventListener("DOMContentLoaded",()=>{try{H()}catch(i){console.error("[App] init error",i)}});})();
