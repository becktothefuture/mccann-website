(()=>{console.log("[ACCORDION-SIMPLE] module loaded");function k(r=".accordeon"){let l=document.querySelector(r);if(!l){console.log("[ACCORDION] \u274C root not found for selector:",r);return}console.log("[ACCORDION] \u2705 Initializing accordion on:",r);let o=t=>t==null?void 0:t.querySelector(":scope > .acc-list"),u=t=>t==null?void 0:t.querySelector(":scope > .acc-trigger"),c=t=>{let e=t.parentElement;return e!=null&&e.classList.contains("acc-list")?e:l},f=l.querySelectorAll(".acc-trigger");f.forEach((t,e)=>{let i=t.closest(".acc-section, .acc-item"),n=o(i);if(n){let d=n.id||`acc-panel-${e}`;n.id=d,t.setAttribute("aria-controls",d),t.setAttribute("aria-expanded","false")}});function p(t){t.classList.add("is-active"),t.style.maxHeight=t.scrollHeight+"px",t.dataset.state="opening";let e=i=>{i.propertyName==="max-height"&&(t.removeEventListener("transitionend",e),t.dataset.state==="opening"&&(t.style.maxHeight="none",t.dataset.state="open"))};t.addEventListener("transitionend",e)}function h(t){let e=t.style.maxHeight==="none"?t.scrollHeight:parseFloat(t.style.maxHeight||0);t.style.maxHeight=(e||t.scrollHeight)+"px",t.offsetHeight,t.style.maxHeight="0px",t.dataset.state="closing";let i=n=>{n.propertyName==="max-height"&&(t.removeEventListener("transitionend",i),t.dataset.state="collapsed",t.classList.remove("is-active"))};t.addEventListener("transitionend",i)}function a(t){let e=c(t);if(!e)return;let i=t.matches(".acc-section")?"acc-section":"acc-item";Array.from(e.children).forEach(n=>{if(n===t||!n.classList.contains(i))return;let d=o(n);if(d&&(d.dataset.state==="open"||d.dataset.state==="opening")){h(d);let s=u(n);s&&(s.setAttribute("aria-expanded","false"),s.classList.remove("is-active"))}})}function m(t){let e=o(t),i=u(t);if(!e)return;!(e.dataset.state==="open"||e.dataset.state==="opening")?(a(t),p(e),i&&(i.setAttribute("aria-expanded","true"),i.classList.add("is-active")),g("acc-open")):(h(e),i&&(i.setAttribute("aria-expanded","false"),i.classList.remove("is-active")),g("acc-close"))}function g(t){try{if(window.Webflow&&window.Webflow.require){let e=window.Webflow.require("ix2");if(e&&e.emit){e.emit(t),console.log("[ACCORDION] Emitted via Webflow:",t);return}}}catch(e){console.log("[ACCORDION] Webflow emit failed:",e)}window.dispatchEvent(new CustomEvent(t)),console.log("[ACCORDION] Emitted via CustomEvent:",t)}l.querySelectorAll(".acc-list").forEach(t=>{t.style.maxHeight="0px",t.dataset.state="collapsed"}),l.addEventListener("click",t=>{let e=t.target.closest(".acc-trigger");if(!e||!l.contains(e))return;t.preventDefault();let i=e.closest(".acc-section, .acc-item");i&&m(i)});let b=new ResizeObserver(t=>{t.forEach(({target:e})=>{e.dataset.state==="open"?e.style.maxHeight="none":e.dataset.state==="opening"&&(e.style.maxHeight=e.scrollHeight+"px")})});l.querySelectorAll(".acc-list").forEach(t=>b.observe(t)),console.log("[ACCORDION] Setup complete with",f.length,"triggers")}function O(r,l=window,o={}){try{l.dispatchEvent(new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(r,{detail:o}))}catch{}}var C=0,S=0,T="";function F(){if(C++)return;let r=document.documentElement;T=r.style.scrollBehavior,r.style.scrollBehavior="auto",S=window.scrollY||r.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${S}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function A({delayMs:r=0}={}){let l=()=>{if(--C>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=T||"",window.scrollTo(0,S)};r?setTimeout(l,r):l()}console.log("[VIMEO] module loaded");function _(r){var o;if(!r)return"";let l=String(r).trim();if(/^\d+$/.test(l))return l;try{let u=new URL(l,"https://example.com");if((u.hostname||"").includes("vimeo.com")){let f=u.pathname.split("/").filter(Boolean);return((o=(f[f.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function q(r,l,o={}){if(!r)return;let u=_(l);if(!u){r.innerHTML="";return}let c=new URLSearchParams({dnt:1,...o}).toString(),f=`https://player.vimeo.com/video/${u}?${c}`,p=document.createElement("iframe");p.src=f,p.allow="autoplay; fullscreen; picture-in-picture; encrypted-media",p.setAttribute("frameborder","0"),p.style.width="100%",p.style.height="100%",r.innerHTML="",r.appendChild(p)}console.log("[LIGHTBOX] module loaded");function H({root:r="#project-lightbox",closeDelayMs:l=1e3}={}){let o=document.querySelector(r);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let u=o.querySelector(".project-lightbox__inner"),c=o.querySelector(".video-area"),f=document.querySelectorAll(".slide"),p=matchMedia("(prefers-reduced-motion: reduce)").matches,h=!1,a=null;function m(e){Array.from(document.body.children).filter(n=>n!==o).forEach(n=>{try{"inert"in n&&(n.inert=!!e)}catch{}e?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden")})}function g(e){if(e.key!=="Tab")return;let i=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),n=Array.from(i).filter(w=>!w.hasAttribute("disabled")&&!w.getAttribute("aria-hidden"));if(n.length===0){e.preventDefault(),(u||o).focus();return}let d=n[0],s=n[n.length-1];e.shiftKey&&document.activeElement===d?(e.preventDefault(),s.focus()):!e.shiftKey&&document.activeElement===s&&(e.preventDefault(),d.focus())}function b(e){var v,E,W;if(h)return;h=!0,a=document.activeElement instanceof HTMLElement?document.activeElement:null;let i=((v=e==null?void 0:e.dataset)==null?void 0:v.video)||"",n=((E=e==null?void 0:e.dataset)==null?void 0:E.title)||"",d=((W=e==null?void 0:e.dataset)==null?void 0:W.text)||"",w=/\.webflow\.com$/.test(location.hostname)||/canvas\.webflow\.com$/.test(location.hostname)?0:1;c&&q(c,i,{autoplay:w,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),m(!0),F(),o.setAttribute("tabindex","-1"),(u||o).focus(),O("LIGHTBOX_OPEN",o,{video:i,title:n,text:d})}function t(){h&&(O("LIGHTBOX_CLOSE",o),p?(A({delayMs:0}),O("LIGHTBOX_CLOSED_DONE",o)):A({delayMs:l}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),m(!1),c&&(c.innerHTML=""),a&&document.body.contains(a)&&a.focus(),h=!1)}f.forEach(e=>e.addEventListener("click",()=>b(e))),o.addEventListener("click",e=>{(u&&!e.target.closest(".project-lightbox__inner")||!u&&e.target===o)&&t()}),document.addEventListener("keydown",e=>{o.getAttribute("data-open")==="true"&&(e.key==="Escape"&&t(),e.key==="Tab"&&g(e))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>A())}console.log("[WEBFLOW] module loaded");function I(r={}){let l=r.scrollerSelector||".perspective-wrapper",o=r.initEventName||"logo-start",u=r.shrinkEventName||r.playEventName||"logo-shrink",c=r.growEventName||"logo-grow",f=!!r.markers;function p(h){if(document.readyState==="complete"){setTimeout(h,0);return}window.addEventListener("load",h,{once:!0})}p(function(){(window.Webflow||[]).push(function(){let a=window.Webflow&&window.Webflow.require?window.Webflow.require("ix3")||window.Webflow.require("ix2"):null,m=window.ScrollTrigger;if(!a||!m)return;let g=document.querySelector(l);if(!g)return;let b=g.querySelector(".slide")||document.querySelector(".slide");if(!b){console.error("[WEBFLOW] Driver slide not found");return}let t=Array.from(g.querySelectorAll(".slide")),e=t.length>0?t[t.length-1]:null;e||console.warn("[WEBFLOW] No slides found, last slide detection disabled"),console.log("[WEBFLOW] Setup complete:",{scroller:!!g,driver:!!b,lastSlide:!!e,totalSlides:t.length,wfIx:!!a,ScrollTrigger:!!m,initEvent:o,shrinkEvent:u,growEvent:c});let i=!1,n=!1,d=!1,s=!1,w=!1;m.create({trigger:b,scroller:g,start:"top top",end:"top -10%",markers:f,onLeave:()=>{if(!i&&!n){i=!0;try{console.log("[WEBFLOW] emit shrink (scrolled down past first slide):",u),a.emit(u),n=!0,d=!1}catch{}}},onEnterBack:()=>{i=!1,n=!1,d=!1,s=!1,w=!1;try{console.log("[WEBFLOW] emit start (return to top):",o),console.log("[WEBFLOW] wfIx available:",!!a,"emit available:",typeof(a==null?void 0:a.emit)),a&&typeof a.emit=="function"?(a.emit(o),console.log("[WEBFLOW] return-to-top event emitted successfully")):console.error("[WEBFLOW] Cannot emit return-to-top: wfIx.emit not available")}catch(y){console.error("[WEBFLOW] Error emitting return-to-top:",y)}}}),e&&m.create({trigger:e,scroller:g,start:"top bottom",end:"bottom top",markers:f,onEnter:()=>{if(!s&&!w){s=!0;try{console.log("[WEBFLOW] emit grow (reached last slide):",c),a.emit(c),w=!0,n=!1,d=!1}catch{}}},onLeaveBack:()=>{if(s&&w){s=!1;try{console.log("[WEBFLOW] emit shrink (scrolling up from last slide):",u),a.emit(u),w=!1,n=!0,d=!1}catch{}}}});let v=g.scrollTop,E=0;m.create({scroller:g,start:0,end:()=>m.maxScroll(g),onUpdate:y=>{let L=g.scrollTop,x=L>v?1:L<v?-1:E;if(i&&!s&&n&&!d&&x===-1&&E!==-1)try{console.log("[WEBFLOW] emit grow (scroll up in middle section):",c),a.emit(c),d=!0,n=!1}catch{}i&&!s&&d&&x===1&&E!==1&&(n=!1,d=!1,console.log("[WEBFLOW] Reset flags - ready to shrink again")),v=L,E=x}}),console.log("[WEBFLOW] ScrollTrigger initialized");let W=(y,L)=>{try{return console.log(`[WEBFLOW] ${L}:`,y),a&&typeof a.emit=="function"?(a.emit(y),console.log(`[WEBFLOW] \u2713 Emitted ${y} - If nothing happens, check Webflow config:`),console.log(`[WEBFLOW]   1. Event name must be exactly: "${y}"`),console.log('[WEBFLOW]   2. Control must NOT be "No Action"'),console.log("[WEBFLOW]   3. Must target the logo element"),console.log("[WEBFLOW]   4. Timeline must be set correctly"),!0):(console.error("[WEBFLOW] \u2717 wfIx.emit not available"),!1)}catch(x){return console.error(`[WEBFLOW] \u2717 Error emitting ${y}:`,x),!1}},B=!1;requestAnimationFrame(()=>{m.refresh(),setTimeout(()=>{B||(W(c,"Initial load - grow"),B=!0)},200)})})})}function D(r={}){if(!(typeof window.matchMedia=="function"?window.matchMedia("(pointer: fine)").matches:!0)||document.getElementById("mccann-custom-cursor"))return;let o=r.clickableSelector||"a[href]",u=document.createElement("style");u.id="mccann-custom-cursor-style",u.textContent=`
    /* Hide native cursor everywhere, including pseudo elements */
    .has-custom-cursor,
    .has-custom-cursor * { cursor: none !important; }
    .has-custom-cursor *::before,
    .has-custom-cursor *::after { cursor: none !important; }

    .custom-cursor {
      position: fixed;
      left: 0;
      top: 0;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #0a3d91; /* dark blue */
      pointer-events: none;
      z-index: 2147483647;
      transform: translate3d(-9999px, -9999px, 0) translate(-50%, -50%) scale(0.3);
      opacity: 0;
      transition: transform 120ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 80ms linear;
      will-change: transform, opacity;
    }

    .custom-cursor.is-visible { opacity: 1; }

    @media (prefers-reduced-motion: reduce) {
      .custom-cursor { transition: none; }
    }
  `,document.head.appendChild(u),document.documentElement.classList.add("has-custom-cursor");let c=document.createElement("div");c.id="mccann-custom-cursor",c.className="custom-cursor",c.setAttribute("aria-hidden","true"),document.body.appendChild(c);let f=0,p=0,h=!1,a=0,m=!1,g=typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)").matches:!1;function b(){if(a=0,!m)return;m=!1;let s=h?1:.3;c.style.transform=`translate3d(${f}px, ${p}px, 0) translate(-50%, -50%) scale(${s})`}function t(){a||(a=requestAnimationFrame(b))}function e(s){s?c.classList.add("is-visible"):c.classList.remove("is-visible")}function i(s){let v=!!(s&&s.closest?s.closest(o):null);v!==h&&(g||(v?c.style.transition="transform 45ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 80ms linear":c.style.transition="transform 120ms cubic-bezier(0.2, 0.9, 0.2, 1), opacity 80ms linear"),h=v,m=!0,t())}function n(s){f=s.clientX,p=s.clientY,i(s.target),e(!0),m=!0,t()}function d(s){s.relatedTarget==null&&e(!1)}return window.addEventListener("pointermove",n,{passive:!0}),window.addEventListener("mouseout",d,{passive:!0}),window.addEventListener("blur",()=>e(!1)),window.addEventListener("focus",()=>e(!0)),function(){window.removeEventListener("pointermove",n),window.removeEventListener("mouseout",d),document.documentElement.classList.remove("has-custom-cursor");try{c.remove()}catch{}try{u.remove()}catch{}}}function M(){let r=["autoplay","encrypted-media","picture-in-picture"],l=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(l).forEach(o=>{let u=(o.getAttribute("allow")||"").split(";").map(f=>f.trim()).filter(Boolean),c=Array.from(new Set([...u,...r])).join("; ");o.setAttribute("allow",c)})}function N(r={}){let l=r.lightboxRoot||"#project-lightbox";if(k(".accordeon"),H({root:l,closeDelayMs:1e3}),r.enableCustomCursor===!0)try{D()}catch{}try{I({scrollerSelector:".perspective-wrapper",initEventName:"logo-start",shrinkEventName:"logo-shrink",growEventName:"logo-grow"})}catch{}}window.App||(window.App={});window.App.init=N;document.addEventListener("DOMContentLoaded",()=>{try{M(),N()}catch(r){console.error("[App] init error",r)}});})();
