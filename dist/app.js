(()=>{function E(n,l=window,o={}){try{l.dispatchEvent(new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:o}))}catch{}try{window.dispatchEvent(new CustomEvent(n,{detail:o}))}catch{}}console.log("[ACCORDION] module loaded");function S(n=".accordeon"){let l=document.querySelector(n);if(!l){console.log("[ACCORDION] root not found");return}let o=e=>e.classList.contains("accordeon-item--level1"),a=e=>e.classList.contains("accordeon-item--level2"),s=e=>e==null?void 0:e.querySelector(":scope > .accordeon__list"),g=e=>o(e)?l:e.closest(".accordeon__list");l.querySelectorAll(".accordeon__trigger").forEach((e,t)=>{e.setAttribute("role","button"),e.setAttribute("tabindex","0");let r=e.closest(".accordeon-item--level1, .accordeon-item--level2"),i=s(r);if(i){let d=i.id||`acc-panel-${t}`;i.id=d,e.setAttribute("aria-controls",d),e.setAttribute("aria-expanded","false")}});function u(e){e.style.maxHeight=e.scrollHeight+"px",e.dataset.state="opening";let t=r=>{r.propertyName==="max-height"&&(e.removeEventListener("transitionend",t),e.dataset.state==="opening"&&(e.style.maxHeight="none",e.dataset.state="open"))};e.addEventListener("transitionend",t)}function f(e){let t=e.style.maxHeight==="none"?e.scrollHeight:parseFloat(e.style.maxHeight||0);e.style.maxHeight=(t||e.scrollHeight)+"px",e.offsetHeight,e.style.maxHeight="0px",e.dataset.state="closing";let r=i=>{i.propertyName==="max-height"&&(e.removeEventListener("transitionend",r),e.dataset.state="collapsed")};e.addEventListener("transitionend",r)}function c(e){let t=g(e);if(!t)return;let r=o(e)?"accordeon-item--level1":"accordeon-item--level2";Array.from(t.children).forEach(i=>{var v;if(i===e||!((v=i.classList)!=null&&v.contains(r)))return;let d=s(i);if(d&&(d.dataset.state==="open"||d.dataset.state==="opening")){f(d);let y=i.querySelector(".accordeon__trigger");y==null||y.setAttribute("aria-expanded","false"),E(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",i,{source:"sibling"})}})}function p(){l.querySelectorAll(".accordeon-item--level2 .accordeon__list").forEach(e=>{var t;if(e.dataset.state==="open"||e.dataset.state==="opening"){f(e);let r=e.closest(".accordeon-item--level2");(t=r==null?void 0:r.querySelector(".accordeon__trigger"))==null||t.setAttribute("aria-expanded","false"),E("ACC_L2_CLOSE",r,{source:"reset-all"})}})}function m(e){let t=s(e);if(!t)return;let r=e.querySelector(".accordeon__trigger"),i=!(t.dataset.state==="open"||t.dataset.state==="opening");c(e),i&&o(e)&&p(),i?(u(t),r==null||r.setAttribute("aria-expanded","true"),E(o(e)?"ACC_L1_OPEN":"ACC_L2_OPEN",e,{opening:!0})):(f(t),r==null||r.setAttribute("aria-expanded","false"),o(e)&&p(),E(o(e)?"ACC_L1_CLOSE":"ACC_L2_CLOSE",e,{opening:!1}))}document.body.classList.add("js-prep"),l.querySelectorAll(".accordeon__list").forEach(e=>{e.style.maxHeight="0px",e.dataset.state="collapsed"}),requestAnimationFrame(()=>document.body.classList.remove("js-prep")),l.addEventListener("click",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!l.contains(t))return;e.preventDefault();let r=t.closest(".accordeon-item--level1, .accordeon-item--level2");r&&m(r)}),l.addEventListener("keydown",e=>{let t=e.target.closest(".accordeon__trigger");if(!t||!l.contains(t)||e.key!=="Enter"&&e.key!==" ")return;e.preventDefault();let r=t.closest(".accordeon-item--level1, .accordeon-item--level2");r&&m(r)});let L=new ResizeObserver(e=>{e.forEach(({target:t})=>{t.dataset.state==="open"?t.style.maxHeight="none":t.dataset.state==="opening"&&(t.style.maxHeight=t.scrollHeight+"px")})});l.querySelectorAll(".accordeon__list").forEach(e=>L.observe(e))}var O=0,x=0,W="";function _(){if(O++)return;let n=document.documentElement;W=n.style.scrollBehavior,n.style.scrollBehavior="auto",x=window.scrollY||n.scrollTop||0,Object.assign(document.body.style,{position:"fixed",top:`-${x}px`,left:"0",right:"0",width:"100%",overflow:"hidden",overscrollBehavior:"none"});try{document.body.classList.add("modal-open")}catch{}}function A({delayMs:n=0}={}){let l=()=>{if(--O>0)return;let o=document.documentElement;Object.assign(document.body.style,{position:"",top:"",left:"",right:"",width:"",overflow:"",overscrollBehavior:""});try{document.body.classList.remove("modal-open")}catch{}o.style.scrollBehavior=W||"",window.scrollTo(0,x)};n?setTimeout(l,n):l()}console.log("[VIMEO] module loaded");function F(n){var o;if(!n)return"";let l=String(n).trim();if(/^\d+$/.test(l))return l;try{let a=new URL(l,"https://example.com");if((a.hostname||"").includes("vimeo.com")){let g=a.pathname.split("/").filter(Boolean);return((o=(g[g.length-1]||"").match(/\d+/))==null?void 0:o[0])||""||""}}catch{}return""}function B(n,l,o={}){if(!n)return;let a=F(l);if(!a){n.innerHTML="";return}let s=new URLSearchParams({dnt:1,...o}).toString(),g=`https://player.vimeo.com/video/${a}?${s}`,u=document.createElement("iframe");u.src=g,u.allow="autoplay; fullscreen; picture-in-picture; encrypted-media",u.setAttribute("frameborder","0"),u.style.width="100%",u.style.height="100%",n.innerHTML="",n.appendChild(u)}console.log("[LIGHTBOX] module loaded");function k({root:n="#project-lightbox",closeDelayMs:l=1e3}={}){let o=document.querySelector(n);if(!o){console.log("[LIGHTBOX] not found");return}o.setAttribute("role",o.getAttribute("role")||"dialog"),o.setAttribute("aria-modal",o.getAttribute("aria-modal")||"true"),o.setAttribute("aria-hidden",o.getAttribute("aria-hidden")||"true");let a=o.querySelector(".project-lightbox__inner"),s=o.querySelector(".video-area"),g=document.querySelectorAll(".slide"),u=matchMedia("(prefers-reduced-motion: reduce)").matches,f=!1,c=null;function p(t){Array.from(document.body.children).filter(i=>i!==o).forEach(i=>{try{"inert"in i&&(i.inert=!!t)}catch{}t?i.setAttribute("aria-hidden","true"):i.removeAttribute("aria-hidden")})}function m(t){if(t.key!=="Tab")return;let r=o.querySelectorAll(["a[href]","button","input","select","textarea",'[tabindex]:not([tabindex="-1"])'].join(",")),i=Array.from(r).filter(y=>!y.hasAttribute("disabled")&&!y.getAttribute("aria-hidden"));if(i.length===0){t.preventDefault(),(a||o).focus();return}let d=i[0],v=i[i.length-1];t.shiftKey&&document.activeElement===d?(t.preventDefault(),v.focus()):!t.shiftKey&&document.activeElement===v&&(t.preventDefault(),d.focus())}function L(t){var h,b,w;if(f)return;f=!0,c=document.activeElement instanceof HTMLElement?document.activeElement:null;let r=((h=t==null?void 0:t.dataset)==null?void 0:h.video)||"",i=((b=t==null?void 0:t.dataset)==null?void 0:b.title)||"",d=((w=t==null?void 0:t.dataset)==null?void 0:w.text)||"",y=/\.webflow\.com$/.test(location.hostname)||/canvas\.webflow\.com$/.test(location.hostname)?0:1;s&&B(s,r,{autoplay:y,muted:1,controls:0,background:1,playsinline:1,dnt:1}),o.setAttribute("aria-hidden","false"),o.setAttribute("data-open","true"),p(!0),_(),o.setAttribute("tabindex","-1"),(a||o).focus(),E("LIGHTBOX_OPEN",o,{video:r,title:i,text:d})}function e(){f&&(E("LIGHTBOX_CLOSE",o),u?(A({delayMs:0}),E("LIGHTBOX_CLOSED_DONE",o)):A({delayMs:l}),o.setAttribute("aria-hidden","true"),o.removeAttribute("data-open"),p(!1),s&&(s.innerHTML=""),c&&document.body.contains(c)&&c.focus(),f=!1)}g.forEach(t=>t.addEventListener("click",()=>L(t))),o.addEventListener("click",t=>{(a&&!t.target.closest(".project-lightbox__inner")||!a&&t.target===o)&&e()}),document.addEventListener("keydown",t=>{o.getAttribute("data-open")==="true"&&(t.key==="Escape"&&e(),t.key==="Tab"&&m(t))}),o.addEventListener("LIGHTBOX_CLOSED_DONE",()=>A())}console.log("[WEBFLOW] module loaded");function C(n={}){let l=n.scrollerSelector||".perspective-wrapper",o=n.initEventName||"logo-start",a=n.shrinkEventName||n.playEventName||"logo-shrink",s=n.growEventName||"logo-grow",g=!!n.markers;function u(f){if(document.readyState==="complete"){setTimeout(f,0);return}window.addEventListener("load",f,{once:!0})}u(function(){(window.Webflow||[]).push(function(){let c=window.Webflow&&window.Webflow.require?window.Webflow.require("ix3")||window.Webflow.require("ix2"):null,p=window.ScrollTrigger;if(!c||!p)return;let m=document.querySelector(l);if(!m)return;let L=m.querySelector(".slide")||document.querySelector(".slide");if(!L){console.error("[WEBFLOW] Driver slide not found");return}console.log("[WEBFLOW] Setup complete:",{scroller:!!m,driver:!!L,wfIx:!!c,ScrollTrigger:!!p,initEvent:o,shrinkEvent:a,growEvent:s});let e=!1,t=!1,r=!1;p.create({trigger:L,scroller:m,start:"top top",end:"top -10%",markers:g,onLeave:()=>{if(!e&&!t){e=!0;try{console.log("[WEBFLOW] emit shrink (scrolled down past first slide):",a),c.emit(a),t=!0,r=!1}catch{}}},onEnterBack:()=>{e=!1,t=!1,r=!1;try{console.log("[WEBFLOW] emit start (return to top):",o),console.log("[WEBFLOW] wfIx available:",!!c,"emit available:",typeof(c==null?void 0:c.emit)),c&&typeof c.emit=="function"?(c.emit(o),console.log("[WEBFLOW] return-to-top event emitted successfully")):console.error("[WEBFLOW] Cannot emit return-to-top: wfIx.emit not available")}catch(h){console.error("[WEBFLOW] Error emitting return-to-top:",h)}}});let i=m.scrollTop,d=0;p.create({scroller:m,start:0,end:()=>p.maxScroll(m),onUpdate:h=>{let b=m.scrollTop,w=b>i?1:b<i?-1:d;if(e&&t&&!r&&w===-1&&d!==-1)try{console.log("[WEBFLOW] emit grow (scroll up):",s),c.emit(s),r=!0,t=!1}catch{}e&&r&&w===1&&d!==1&&(t=!1,r=!1,console.log("[WEBFLOW] Reset flags - ready to shrink again")),i=b,d=w}}),console.log("[WEBFLOW] ScrollTrigger initialized");let v=(h,b)=>{try{return console.log(`[WEBFLOW] ${b}:`,h),c&&typeof c.emit=="function"?(c.emit(h),console.log(`[WEBFLOW] \u2713 Emitted ${h} - If nothing happens, check Webflow config:`),console.log(`[WEBFLOW]   1. Event name must be exactly: "${h}"`),console.log('[WEBFLOW]   2. Control must NOT be "No Action"'),console.log("[WEBFLOW]   3. Must target the logo element"),console.log("[WEBFLOW]   4. Timeline must be set correctly"),!0):(console.error("[WEBFLOW] \u2717 wfIx.emit not available"),!1)}catch(w){return console.error(`[WEBFLOW] \u2717 Error emitting ${h}:`,w),!1}},y=!1;requestAnimationFrame(()=>{p.refresh(),setTimeout(()=>{y||(v(s,"Initial load - grow"),y=!0)},200)})})})}function q(){let n=["autoplay","encrypted-media","picture-in-picture"],l=['iframe[src*="youtube.com"]','iframe[src*="youtu.be"]','iframe[src*="youtube-nocookie.com"]'].join(",");document.querySelectorAll(l).forEach(o=>{let a=(o.getAttribute("allow")||"").split(";").map(g=>g.trim()).filter(Boolean),s=Array.from(new Set([...a,...n])).join("; ");o.setAttribute("allow",s)})}function T(n={}){let l=n.lightboxRoot||"#project-lightbox";S(".accordeon"),k({root:l,closeDelayMs:1e3});try{C({scrollerSelector:".perspective-wrapper",initEventName:"logo-start",shrinkEventName:"logo-shrink",growEventName:"logo-grow"})}catch{}}window.App||(window.App={});window.App.init=T;document.addEventListener("DOMContentLoaded",()=>{try{q(),T()}catch(n){console.error("[App] init error",n)}});})();
