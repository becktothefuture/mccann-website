<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Preloader Test ‚Äî McCann Website</title>
  
  <!-- Load compiled CSS -->
  <link rel="stylesheet" href="./dist/style.css">
  
  <style>
    /* Basic page styling for test */
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .test-content {
      padding: 4rem 2rem;
      max-width: 1200px;
      margin: 0 auto;
      color: white;
    }
    
    .test-header {
      text-align: center;
      margin-bottom: 3rem;
    }
    
    .test-header h1 {
      font-size: 3rem;
      font-weight: 700;
      margin: 0 0 1rem 0;
    }
    
    .test-header p {
      font-size: 1.25rem;
      opacity: 0.9;
      margin: 0;
    }
    
    .video-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 3rem;
    }
    
    .video-card {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    }
    
    .video-card h3 {
      margin: 0 0 1rem 0;
      font-size: 1.25rem;
      font-weight: 600;
    }
    
    .video-card video {
      width: 100%;
      height: auto;
      border-radius: 8px;
      display: block;
    }
    
    .controls {
      margin-top: 3rem;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 12px;
    }
    
    .controls h2 {
      margin: 0 0 1rem 0;
      font-size: 1.5rem;
    }
    
    .button-group {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
    }
    
    button {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid rgba(255, 255, 255, 0.3);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    button:hover {
      background: rgba(255, 255, 255, 0.3);
      border-color: rgba(255, 255, 255, 0.5);
      transform: translateY(-2px);
    }
    
    button:active {
      transform: translateY(0);
    }
    
    .status {
      margin-top: 2rem;
      padding: 1rem;
      background: rgba(0, 0, 0, 0.2);
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 0.875rem;
    }
    
    .status-item {
      margin: 0.5rem 0;
    }
    
    .status-item.success { color: #4ade80; }
    .status-item.error { color: #f87171; }
    .status-item.info { color: #60a5fa; }
  </style>
</head>
<body class="preloader-active">
  
  <!-- PRELOADER (Must be first element in body) -->
  <div id="preloader">
    <div class="preloader__content">
      <!-- TruthWellTold Signet -->
      <div class="preloader__signet" role="img" aria-label="TruthWellTold logo">
        <svg viewBox="0 0 343 344" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0_122_39680)">
            <path d="M171.91 8.22577e-05C78.07 -0.459918 -0.589998 77.1101 1.73482e-06 172.31H0.0800017C0.0900017 175.65 0.200002 178.96 0.400002 182.25H18.04C17.82 178.96 17.7 175.65 17.69 172.31H17.71C17 137.82 31.55 92.9501 63.74 61.9101V182.25H82.54V46.1201C126.03 14.6301 186.1 8.76008 234.93 31.0301V128.85H251.91V39.9601C262.38 46.3201 272.1 53.9401 280.76 62.5801V38.8701C251.11 14.5601 213.2 8.22577e-05 171.91 8.22577e-05Z" fill="currentColor"/>
            <path d="M265.54 217.87H214.86V307.09C214.86 307.09 288.05 282.3 288.05 238.64C288.05 224.08 278.01 217.87 265.54 217.87ZM269.21 244.52C264.29 261.18 249.8 273.86 233.12 280.79V234.25H261.5C268.4 234.25 271.12 238.09 269.21 244.52Z" fill="currentColor"/>
            <path d="M239.04 192.37H203.41V180.62H231.21V165.37H203.41V154.37H237.82V139.12H187.36V207.62H239.04V192.37Z" fill="currentColor"/>
            <path d="M248.07 139.26V207.76H290.9V192.51H264.68V139.26H248.07Z" fill="currentColor"/>
            <path d="M167.78 30.0405V98.6805C167.78 119.14 178.06 130.54 196.51 130.54C214.96 130.54 225.24 119.14 225.24 98.6805V40.3205C225.24 40.3205 216.73 37.1105 208.26 34.7205V104.59C208.26 111.46 204.05 115.29 196.51 115.29C188.97 115.29 184.74 111.45 184.74 104.59V30.5305C178.35 29.9205 172.19 29.9105 167.78 30.0405Z" fill="currentColor"/>
            <path d="M82.54 192.37H1.21997C1.85997 198.36 2.55997 202.9 3.56997 207.62H38.66V280.53C44.39 287.57 50.68 294.14 57.46 300.18V207.62H82.54V192.37Z" fill="currentColor"/>
            <path d="M160.33 179.9L142.93 152.73H132.93L115.42 179.91V139.12H98.37V207.62H115.42L137.5 174.11L160.33 207.62H177.39V139.12H160.33V179.9Z" fill="currentColor"/>
            <path d="M318.41 81.9497C314.02 75.6097 307.43 65.7897 301.43 58.9297V94.8897H280.75V80.7897C275.71 74.7497 270.33 69.1397 263.77 63.6397V127.73H280.75V110.42H301.43V127.73H318.41V81.9597V81.9497Z" fill="currentColor"/>
            <path d="M319.27 217.87C302.26 272.49 255.71 314.09 198.3 323.98V217.87H179.48V343.49C255.08 340.21 318.02 288.08 337.5 217.87H319.27Z" fill="currentColor"/>
            <path d="M324.75 192.51H314.66V139.26H298.03V207.76H339.96C341.03 202.75 341.88 197.67 342.5 192.51H324.75Z" fill="currentColor"/>
            <path d="M144.69 93.94C152.72 87.64 159.15 79.02 159.15 67.32C159.15 47.31 148.78 37.5 131.2 37.5C119.74 37.5 106.19 44.68 98.36 49.45V129.04H115.42V108.36C118.17 107.37 123.49 105.66 129.49 102.93L141.66 129.04H161.06L144.68 93.94H144.69ZM115.42 92.71V57C131.95 49.11 143.97 50.92 143.97 63.92C143.97 83.27 120.73 90.46 115.42 92.7" fill="currentColor"/>
            <path d="M121.41 217.13H121.28C90.84 217.2 73.76 238.39 73.76 276.11C73.76 313.83 90.86 335.02 121.28 335.09H121.41C151.85 335.02 168.93 313.83 168.93 276.11C168.93 238.39 151.83 217.2 121.41 217.13ZM121.41 317.25H121.28C103.2 317.18 93.13 302.45 93.13 276.11C93.13 249.77 103.21 235.04 121.28 234.97H121.41C139.49 235.04 149.56 249.77 149.56 276.11C149.56 302.45 139.48 317.18 121.41 317.25Z" fill="currentColor"/>
          </g>
          <defs>
            <clipPath id="clip0_122_39680">
              <rect width="342.5" height="343.49" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </div>
      
      <!-- Progress Indicator -->
      <div class="preloader__progress" role="status" aria-live="polite" aria-atomic="true">
        Loading...
      </div>
    </div>
  </div>
  
  <!-- MAIN CONTENT -->
  <div class="test-content">
    <div class="test-header">
      <h1>‚ú® Preloader Test Page</h1>
      <p>Testing video prefetching with TruthWellTold signet animation</p>
    </div>
    
    <div class="video-grid">
      <!-- Video 1: Big Buck Bunny (Webflow/Blender test video) -->
      <div class="video-card">
        <h3>Video 1: Big Buck Bunny</h3>
        <video autoplay muted loop playsinline data-autoplay="true">
          <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4" type="video/mp4">
          Your browser does not support video.
        </video>
      </div>
      
      <!-- Video 2: Elephants Dream -->
      <div class="video-card">
        <h3>Video 2: Elephants Dream</h3>
        <video autoplay muted loop playsinline data-wf-ignore="true">
          <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4" type="video/mp4">
          Your browser does not support video.
        </video>
      </div>
      
      <!-- Video 3: For Bigger Blazes -->
      <div class="video-card">
        <h3>Video 3: For Bigger Blazes</h3>
        <video autoplay muted loop playsinline>
          <source src="https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4" type="video/mp4">
          Your browser does not support video.
        </video>
      </div>
    </div>
    
    <div class="controls">
      <h2>üéÆ Test Controls</h2>
      <div class="button-group">
        <button onclick="testReloadPage()">üîÑ Reload Page</button>
        <button onclick="testJitterMode()">‚ö° Test Jitter Mode</button>
        <button onclick="testPulseMode()">üíì Test Pulse Mode</button>
        <button onclick="testReducedMotion()">‚ôø Test Reduced Motion</button>
        <button onclick="openConsole()">üìã View Console Logs</button>
      </div>
      
      <div class="status" id="status">
        <div class="status-item info">‚úì Page loaded</div>
        <div class="status-item info">‚è≥ Check browser console for detailed logs</div>
      </div>
    </div>
  </div>
  
  <!-- Load compiled JavaScript -->
  <script src="./dist/app.js"></script>
  
  <script>
    // Test utilities
    function testReloadPage() {
      location.reload();
    }
    
    function testJitterMode() {
      addStatus('üîß Testing jitter mode (reload required)', 'info');
      localStorage.setItem('preloader-test-mode', 'jitter');
      localStorage.setItem('preloader-show-log', 'true');
      setTimeout(() => location.reload(), 1000);
    }
    
    function testPulseMode() {
      addStatus('üîß Testing pulse mode (reload required)', 'info');
      localStorage.setItem('preloader-test-mode', 'pulse');
      localStorage.setItem('preloader-show-log', 'true');
      setTimeout(() => location.reload(), 1000);
    }
    
    function testReducedMotion() {
      addStatus('‚ôø Reduced motion test requires browser settings', 'info');
      addStatus('Enable: System Preferences ‚Üí Accessibility ‚Üí Display ‚Üí Reduce Motion', 'info');
    }
    
    function openConsole() {
      addStatus('üìã Opening DevTools console...', 'info');
      console.log('\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê');
      console.log('   PRELOADER TEST - Console Logs');
      console.log('‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n');
      console.log('Search for [PRELOADER] tags to see preloader activity');
      console.log('Expected logs:');
      console.log('  - [PRELOADER] Module loaded');
      console.log('  - [PRELOADER] Initializing...');
      console.log('  - [PRELOADER] ‚úì Elements found');
      console.log('  - [PRELOADER] üé¨ Found X video(s) to prefetch');
      console.log('  - [PRELOADER] ‚úì Video N can play');
      console.log('  - [PRELOADER] ‚úì Videos loaded in Xms');
      console.log('  - [PRELOADER] üéØ Hiding preloader');
      console.log('  - [PRELOADER] ‚úì Complete\n');
    }
    
    function addStatus(message, type = 'info') {
      const statusEl = document.getElementById('status');
      const item = document.createElement('div');
      item.className = `status-item ${type}`;
      item.textContent = message;
      statusEl.appendChild(item);
      
      // Auto-scroll to bottom
      statusEl.scrollTop = statusEl.scrollHeight;
    }
    
    // Listen for preloader events
    window.addEventListener('preloader:complete', () => {
      addStatus('‚úÖ Preloader completed successfully', 'success');
      addStatus('üé¨ All videos should be ready to play', 'success');
    });
    
    // Initialize preloader with pulse animation
    window.App.init({
      preloader: {
        showDebugLog: true,    // Show debug log
        pulseDuration: 3000,
        pulseOpacity: 0.2
      }
    });
    
    addStatus('‚ú® Preloader initialized!', 'success');
    addStatus('üíì Pulse animation active', 'info');
    addStatus('üìä Real-time log in bottom-left corner', 'info');
    
    // Check video playback after load
    setTimeout(() => {
      const videos = document.querySelectorAll('video');
      let playingCount = 0;
      
      videos.forEach((video, index) => {
        if (!video.paused) {
          playingCount++;
          addStatus(`‚úì Video ${index + 1} playing`, 'success');
        } else {
          addStatus(`‚ö† Video ${index + 1} not playing`, 'error');
        }
      });
      
      if (playingCount === videos.length) {
        addStatus(`üéâ All ${videos.length} videos playing successfully!`, 'success');
      } else {
        addStatus(`‚ö† ${videos.length - playingCount}/${videos.length} videos failed to play`, 'error');
      }
    }, 3000);
    
    // Log initial state
    console.log('\nüß™ Preloader Test Page Loaded');
    console.log('Videos on page:', document.querySelectorAll('video').length);
    console.log('Open console to see detailed preloader logs\n');
  </script>
  
</body>
</html>

